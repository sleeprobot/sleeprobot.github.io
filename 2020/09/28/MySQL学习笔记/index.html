<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"tiangoubot.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="数据库和SQL概述数据库的好处 实现数据持久化管理 使用完整的管理系统统一管理，易于查询"><meta property="og:type" content="article"><meta property="og:title" content="MySQL学习笔记"><meta property="og:url" content="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="学海无涯"><meta property="og:description" content="数据库和SQL概述数据库的好处 实现数据持久化管理 使用完整的管理系统统一管理，易于查询"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576832538927.png"><meta property="og:image" content="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576833229769.png"><meta property="og:image" content="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576833502245.png"><meta property="article:published_time" content="2020-09-28T06:23:05.000Z"><meta property="article:modified_time" content="2020-10-01T15:06:30.072Z"><meta property="article:author" content="sleep"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576832538927.png"><link rel="canonical" href="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>MySQL学习笔记 | 学海无涯</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">学海无涯</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">学海无涯苦作舟</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签<span class="badge">3</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类<span class="badge">3</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档<span class="badge">4</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/tiangoubot" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/author.jpg"><meta itemprop="name" content="sleep"><meta itemprop="description" content="基层菜鸟，苦苦挣扎"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="学海无涯"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> MySQL学习笔记</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-09-28 14:23:05" itemprop="dateCreated datePublished" datetime="2020-09-28T14:23:05+08:00">2020-09-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-10-01 23:06:30" itemprop="dateModified" datetime="2020-10-01T23:06:30+08:00">2020-10-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">评论数：</span><a title="valine" href="/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>46k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>42 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="数据库和SQL概述"><a href="#数据库和SQL概述" class="headerlink" title="数据库和SQL概述"></a>数据库和SQL概述</h1><h2 id="数据库的好处"><a href="#数据库的好处" class="headerlink" title="数据库的好处"></a>数据库的好处</h2><ul><li>实现数据持久化管理</li><li>使用完整的管理系统统一管理，易于查询</li></ul><a id="more"></a><h2 id="数据库的概念"><a href="#数据库的概念" class="headerlink" title="数据库的概念"></a>数据库的概念</h2><p>DB 数据库（database）：存储数据的“仓库”。</p><p>DBMS：数据库管理系统（Database Management System ）数据库是通过DBMS创建和操作的容器。</p><p>SQL：结构化查询语言（Structure Query Language）专门用来与数据库通信的语言</p><p>常见的数据库管理系统：MySQL、Oracle、DB2、SQLserve</p><h2 id="SQL语言"><a href="#SQL语言" class="headerlink" title="SQL语言"></a>SQL语言</h2><p>数据库是不认识java语言的，但是我们同样要与数据库交互，这是需要使用到数据库认识的语言SQL语句，它是数据库的代码。</p><p>结构化查询语言（Structure Query Language）简称SQL，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。</p><p>创建数据库、创建数据表、向数据表中添加一条条数据信息均需要使用SQL语句。</p><h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><p>DML（Data Manipulation Language）：数据操纵语言，用于添加、删除、修改、查询数据库记录，并检查数据完整性。包括如下SQL语句等：</p><ul><li>INSERT：添加数据到数据库中</li><li>UPDATE：修改数据库中的数据</li><li>DELETE：删除数据库中的数据</li><li>SELECT：选择（查询）数据</li><li><strong>SELECT 是SQL语言中的基础，最为重要</strong></li></ul><h3 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h3><p>DDL（Data Definition Language）：数据定义语句，用于库和表的创建、修改、删除。包括如下SQL语句等：</p><ul><li>CREATE TABLE：创建数据库表</li><li>ALTER TABLE：更改表结构、添加、删除、修改列长度</li><li>DROP TABLE：删除表</li><li>CREATE INDEX：在表上建立索引</li><li>DROP INDEX：删除索引</li></ul><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><p>DCL（Data Control Language）：数据控制语句，用于定义用户的访问权限和安全级别。包括如下SQL语句等：</p><ul><li>GRANT：授予访问权限</li><li>REVOKE：撤销访问权限</li><li>COMMIT：提交事务处理</li><li>ROLLBACK：事务处理回退（回滚）</li><li>SAVEPOINT：设置保存点</li><li>LOCK：对数据库的特定部分进行锁定</li></ul><h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><p>DQL（Data Query Language）：数据查询语言，用来查询数据库中表的记录。关键字：SELECT，FROM，WHERE等。</p><h1 id="MySQL的安装与使用"><a href="#MySQL的安装与使用" class="headerlink" title="MySQL的安装与使用"></a>MySQL的安装与使用</h1><h2 id="MySQL的安装"><a href="#MySQL的安装" class="headerlink" title="MySQL的安装"></a>MySQL的安装</h2><ul><li>Windows版本</li><li>Linux版本</li></ul><h2 id="启动和停止MySQL服务"><a href="#启动和停止MySQL服务" class="headerlink" title="启动和停止MySQL服务"></a>启动和停止MySQL服务</h2><ul><li>Windows<ul><li>方式一：通过计算机管理方式；右击计算机-&gt;管理-&gt;服务-&gt;启动或停止MySQL服务</li><li>方式二：通过命令行方式；启动：net start mysql服务名；停止：net stop mysql服务名</li></ul></li><li>Linux<ul><li>启动：service mysql（mysqld） start</li><li>停止：service mysql（mysqld） stop</li><li>状态：service mysql（mysqld） status</li></ul></li></ul><h2 id="MySQL服务端的登录和退出"><a href="#MySQL服务端的登录和退出" class="headerlink" title="MySQL服务端的登录和退出"></a>MySQL服务端的登录和退出</h2><ul><li><p>登录</p><p>mysql -u用户名 -p密码</p></li><li><p>远程登录</p><p>mysql -h 主机名 -p 端口号 -u用户名 -p密码</p></li><li><p>退出</p><p>exit或者quit</p></li></ul><h2 id="MySQL数据库的使用"><a href="#MySQL数据库的使用" class="headerlink" title="MySQL数据库的使用"></a>MySQL数据库的使用</h2><ul><li>不区分大小写（Linux上区分，可以通过配置文件修改）<strong>建议关键字全部大写</strong></li><li>每句话使用;或者\g结尾</li><li>各子句一般分行写</li><li>关键字不能缩写也不能分行</li><li>用缩进提高语句的可读性</li></ul><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><h3 id="查看MySQL中有哪些数据库"><a href="#查看MySQL中有哪些数据库" class="headerlink" title="查看MySQL中有哪些数据库"></a>查看MySQL中有哪些数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure><h3 id="使用一个数据库"><a href="#使用一个数据库" class="headerlink" title="使用一个数据库"></a>使用一个数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名称</span><br></pre></td></tr></table></figure><h3 id="查看当前使用的数据库中的表"><a href="#查看当前使用的数据库中的表" class="headerlink" title="查看当前使用的数据库中的表"></a>查看当前使用的数据库中的表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure><h3 id="查看指定数据库中的表"><a href="#查看指定数据库中的表" class="headerlink" title="查看指定数据库中的表"></a>查看指定数据库中的表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES FROM 数据库名;</span><br></pre></td></tr></table></figure><h3 id="新建一个数据库"><a href="#新建一个数据库" class="headerlink" title="新建一个数据库"></a>新建一个数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#创建数据库 数据库中数据的编码采用的是安装数据库是指定的默认编码 utf8</span><br><span class="line">CREATE DATABASE 数据库名;</span><br><span class="line">#创建数据库 并指定数据库中数据的编码</span><br><span class="line">CREATE DATABASE 数据库名 CHARACTER SET utf8</span><br></pre></td></tr></table></figure><h3 id="查看当前选择的数据库"><a href="#查看当前选择的数据库" class="headerlink" title="查看当前选择的数据库"></a>查看当前选择的数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student_info(</span><br><span class="line">	id int,</span><br><span class="line">	name varchar(20));</span><br></pre></td></tr></table></figure><h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 表名;</span><br></pre></td></tr></table></figure><h3 id="查看表中所有记录"><a href="#查看表中所有记录" class="headerlink" title="查看表中所有记录"></a>查看表中所有记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 表名;</span><br></pre></td></tr></table></figure><h3 id="向表中插入记录"><a href="#向表中插入记录" class="headerlink" title="向表中插入记录"></a>向表中插入记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名(列名1, 列名2, ..., 列名n) VALUES(列1值, 列2值, ..., 列n值);</span><br></pre></td></tr></table></figure><p><strong>注意：插入varchar 或 date 类型的数据要用 英文单引号 引起来</strong></p><h1 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h1><p>使用的数据表</p><h2 id="SELECT语句"><a href="#SELECT语句" class="headerlink" title="SELECT语句"></a>SELECT语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT *|&#123;[DISTINCT] column|expression [alias],...&#125; FROM 表名</span><br></pre></td></tr></table></figure><ul><li>SELECT 标识选择哪些列</li><li>FROM 标识从哪个表中选</li></ul><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表 FROM 表名;</span><br></pre></td></tr></table></figure><p>特点：</p><ol><li>查询列表可以是：表中的字段、常量值、表达式、函数</li><li>查询的结果是一个虚拟的表格</li></ol><h3 id="查询全部列"><a href="#查询全部列" class="headerlink" title="查询全部列"></a>查询全部列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 表名;</span><br></pre></td></tr></table></figure><h3 id="查询特定的列"><a href="#查询特定的列" class="headerlink" title="查询特定的列"></a>查询特定的列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id, name FROM student;</span><br></pre></td></tr></table></figure><h3 id="查询表达式"><a href="#查询表达式" class="headerlink" title="查询表达式"></a>查询表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100%98;</span><br></pre></td></tr></table></figure><h3 id="查询函数"><a href="#查询函数" class="headerlink" title="查询函数"></a>查询函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br></pre></td></tr></table></figure><h2 id="查询时给列取别名"><a href="#查询时给列取别名" class="headerlink" title="查询时给列取别名"></a>查询时给列取别名</h2><p><strong>在别名中包含空格或特殊的字符时，使用英文双引号包裹别名</strong></p><p>使用别名的好处：</p><ol><li>便于理解</li><li>如果要查询的字段有重名的情况，使用别名可以区分开来</li></ol><h3 id="使用as"><a href="#使用as" class="headerlink" title="使用as"></a>使用as</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名1 AS &quot;列名1别名&quot;, 列名2 as &quot;列名2别名&quot; FROM 表名;</span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100%98 as &quot;结果&quot;;</span><br><span class="line">SELECT last_name AS &quot;姓&quot;, first_name AS &quot;名&quot; FROM employees;</span><br></pre></td></tr></table></figure><h3 id="使用空格"><a href="#使用空格" class="headerlink" title="使用空格"></a>使用空格</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名1 &quot;列名1别名&quot;, 列名2 &quot;列名2别名&quot; FROM 表名; </span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查询salary，显示结果为 out_put</span><br><span class="line">SELECT salary &quot;out_put&quot; FROM employees;</span><br></pre></td></tr></table></figure><h2 id="查询去重"><a href="#查询去重" class="headerlink" title="查询去重"></a>查询去重</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 字段名 FROM 表名;</span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查询员工表中涉及到的所有部门编号</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br></pre></td></tr></table></figure><h2 id="加号-的作用"><a href="#加号-的作用" class="headerlink" title="加号(+)的作用"></a>加号(+)的作用</h2><p>Java中的 + 号：</p><ol><li>运算符，两个操作数都为数值型</li><li>连接符，只要有一个操作数为字符串，就会被当做连接符使用</li></ol><p>MySQL中的 + 号：仅仅只有一个功能，用作运算，即运算符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 直接运算</span><br><span class="line">SELECT 数值 + 数值;</span><br><span class="line"></span><br><span class="line"># 先试图将字符转换成数值，如果转换成功，则继续运算，否则转换成0，在做运算</span><br><span class="line">SELECT 字符 + 数值;</span><br><span class="line"></span><br><span class="line"># 结果都为null</span><br><span class="line">SELECT NULL + 值;</span><br></pre></td></tr></table></figure><h2 id="CONCAT函数"><a href="#CONCAT函数" class="headerlink" title="CONCAT函数"></a>CONCAT函数</h2><p>功能：拼接字符，相当于java中的 “1” + “23” = “123”;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(字符1, 字符2, 字符3,...);</span><br></pre></td></tr></table></figure><h2 id="IFNULL函数"><a href="#IFNULL函数" class="headerlink" title="IFNULL函数"></a>IFNULL函数</h2><p>功能：判断某字段或者表达式是否为null，如果为null返回指定的值，否则返回原本的值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果commission_pct列为null则返回0</span><br><span class="line">SELECT IFNULL(commission_pct, 0) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="ISNULL函数"><a href="#ISNULL函数" class="headerlink" title="ISNULL函数"></a>ISNULL函数</h2><p>功能：判断某字段或表达式是否为null，如果是则返回1，否则返回0</p><h1 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h1><p>过滤：使用 WHERE 子句，将不满足条件的行（记录）过滤掉</p><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表 FROM 表名 WHERE 筛选条件;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">运算符</th><th align="center">符号</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">比较(条件)运算符</td><td align="center">&gt;、&lt;、&gt;=、&lt;=、=、&lt;&gt;(!=)</td><td align="center">大于、小于、大于等于、小于等于、等于、不等于</td></tr><tr><td align="center">BETWEEN…AND…</td><td align="center"></td><td align="center">显示在某一区间的值（包含头尾）</td></tr><tr><td align="center">IN(可能的值的集合)</td><td align="center"></td><td align="center">显示在in列表中的值，例如：IN(100, 200, 300)</td></tr><tr><td align="center">LIKE 通配符</td><td align="center"></td><td align="center">模糊查询，Like语句中有两个通配符：%用来匹配多个字符；例如first_name like ‘a%’; _用来匹配一个字符。例如first_name like ‘a_’;</td></tr><tr><td align="center">IS NULL</td><td align="center"></td><td align="center">判断是否为空；IS NULL判断为空； IS NOT NULL判断不为空</td></tr><tr><td align="center">逻辑运算符</td><td align="center">AND（&amp;&amp;）</td><td align="center">多个条件同时成立</td></tr><tr><td align="center">逻辑运算符</td><td align="center">OR（||）</td><td align="center">多个条件任一成立</td></tr><tr><td align="center">逻辑运算符</td><td align="center">NOT（！）</td><td align="center">不成立或者说去反，例：WHERE NOT（salary &gt; 100）</td></tr></tbody></table><p><strong>注意：为了方便建表，将between…and.. 、in、like、is null归为运算符，可能不是很准确</strong></p><h2 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="headerlink" title="按条件表达式筛选"></a>按条件表达式筛选</h2><ol><li>查询工资&gt;12000的员工信息</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	* </span><br><span class="line">FROM</span><br><span class="line">	employees </span><br><span class="line">WHERE</span><br><span class="line">	salary &gt; 12000;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询部门编号不等于90的员工名和部门编号</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_id </span><br><span class="line">FROM</span><br><span class="line">	employees </span><br><span class="line">WHERE</span><br><span class="line">	department_id &lt;&gt; 90;</span><br></pre></td></tr></table></figure><h2 id="按逻辑表达式筛选"><a href="#按逻辑表达式筛选" class="headerlink" title="按逻辑表达式筛选"></a>按逻辑表达式筛选</h2><ol><li>查询工资在10000到20000之间的员工名、工资以及奖金率</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	commission_pct </span><br><span class="line">FROM</span><br><span class="line">	employees </span><br><span class="line">WHERE</span><br><span class="line">	salary &gt;&#x3D; 10000 AND salary &lt;&#x3D; 20000;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	commission_pct </span><br><span class="line">FROM</span><br><span class="line">	employees </span><br><span class="line">WHERE</span><br><span class="line">	salary BETWEEN 10000 AND 20000;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询部门编号不是在90到110之间，或者工资高于15000的员工信息</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	* </span><br><span class="line">FROM </span><br><span class="line">	employees </span><br><span class="line">WHERE </span><br><span class="line">	NOT ( department_id &gt;&#x3D; 90 AND department_id &lt;&#x3D; 110 ) </span><br><span class="line">	OR salary &gt; 15000;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	* </span><br><span class="line">FROM </span><br><span class="line">	employees </span><br><span class="line">WHERE </span><br><span class="line">	NOT ( department_id BETWEEN 90 AND 110) </span><br><span class="line">	OR salary &gt; 15000;</span><br></pre></td></tr></table></figure><h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><p><strong>关键字：</strong>LIKE</p><p><strong>特点：</strong></p><ol><li><p>一般和通配符搭配使用</p><p>通配符：</p><p>%：任意多个字符，包含0个字符</p><p>_ ：任意单个字符</p></li></ol><p><strong>案例：</strong></p><ol><li>查询员工名中包含字符a的员工信息</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;%a%&#39;;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询员工名中第三个字符为m，第五个字符为n的员工名和工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;__m_n%&#39;;</span><br></pre></td></tr></table></figure><ol start="3"><li><p>查询员工名中第二个字符为_的员工名</p><p>如果查询的字符为_，这时就需要转义，可以使用<code>\</code>，可以使用ESCAPE，定义一个转义标识</p><p>ESCAPE：定义转义标识</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;_$_%&#39; ESCAPE &#39;$&#39;;</span><br></pre></td></tr></table></figure><h2 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h2><p>含义：判断某字段的值是否属于IN列表中的某一项</p><p>特点：</p><ol><li>使用IN提高语句简洁度</li><li>列表的值类型必须一致或兼容</li><li>列表中不支持通配符</li></ol><p>查询员工的工种编号是IT_PROG、AD_VP、AD_PRES中的一个的员工名和工种编号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	job_id IN(&#39;IT_PROG&#39;, &#39;AD_VP&#39;, &#39;AD_PRES&#39;);</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	job_id &#x3D; &#39;IT_PROG&#39; OR job_id &#x3D; &#39;AD_VP&#39; OR job_id &#x3D; &#39;AD_PRES&#39;;</span><br></pre></td></tr></table></figure><h2 id="IS-NULL"><a href="#IS-NULL" class="headerlink" title="IS NULL"></a>IS NULL</h2><p><strong>=或&lt;&gt;不能用于判断null值；IS NULL 或 IS NOT NULL可以判断null值</strong></p><ol><li>查询没有奖金的员工名和奖金率</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NULL;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询有奖金的员工名和奖金率</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure><h2 id="安全等于-lt-gt"><a href="#安全等于-lt-gt" class="headerlink" title="安全等于&lt;=&gt;"></a>安全等于&lt;=&gt;</h2><ol><li>查询没有奖金的员工名和奖金率</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct &lt;&#x3D;&gt; NULL;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询工资为12000的员工信息</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;&#x3D;&gt; 12000;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><p><strong>IS NULL：仅仅可以判断NULL值，可读性比较高，建议使用</strong></p><p><strong>&lt;=&gt;：既可以判断NULL值，又可以判断普通的数据，可读性比较低，不推荐使用</strong></p><h1 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h1><p>使用 ORDER BY 子句排序</p><ul><li>ASC（ascend）：升序</li><li>DESC（descend）：降序</li></ul><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表名</span><br><span class="line">[WHERE 筛选条件]</span><br><span class="line">ORDER BY 排序的字段或表达式;</span><br></pre></td></tr></table></figure><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol><li>ASC代表的是升序，可以省略。</li><li>ORDER BY子句可以支持 单个字段、别名、表达式、函数、多个字段</li><li>ORDER BY子句在查询语句的最后面，除了LIMIT子句</li></ol><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="单个字段排序"><a href="#单个字段排序" class="headerlink" title="单个字段排序"></a>单个字段排序</h3><ol><li>查询员工表按薪水降序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees ORDER BY salary DESC; </span><br></pre></td></tr></table></figure><ol start="2"><li>查询部门编号&gt;=90的员工信息，并按员工编号降序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &gt;&#x3D; 90</span><br><span class="line">ORDER BY employee_id DESC;</span><br></pre></td></tr></table></figure><h3 id="按表达式排序"><a href="#按表达式排序" class="headerlink" title="按表达式排序"></a>按表达式排序</h3><ol><li>查询员工信息 按年薪降序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *, salary * 12 * (1 + IFNULL(commission_pct, 0))</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY salary * 12 * (1 + IFNULL(commission_pct, 0)) DESC;</span><br></pre></td></tr></table></figure><h3 id="按别名排序"><a href="#按别名排序" class="headerlink" title="按别名排序"></a>按别名排序</h3><ol><li>查询员工信息，按年薪升序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *, salary * 12 * (1 + IFNULL(commission_pct, 0)) AS 年薪</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY 年薪 ASC;</span><br></pre></td></tr></table></figure><h3 id="按函数排序"><a href="#按函数排序" class="headerlink" title="按函数排序"></a>按函数排序</h3><ol><li>查询员工名，并且按名字的长度降序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(last_name), last_name</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY LENGTH(last_name) DESC;</span><br></pre></td></tr></table></figure><h3 id="多个字段排序"><a href="#多个字段排序" class="headerlink" title="多个字段排序"></a>多个字段排序</h3><ol><li>查询员工信息，要求先按工资降序，再按employee_id升序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees ORDER BY salary DESC, employee_id ASC;</span><br></pre></td></tr></table></figure><h1 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h1><h2 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h2><h3 id="LENGTH-s"><a href="#LENGTH-s" class="headerlink" title="LENGTH(s)"></a>LENGTH(s)</h3><p>获取参数值的字节个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(&#39;Tom&#39;);</span><br><span class="line"># utf8字符集下，一个汉字占3个字节，gbk中，一个汉字占2个字节</span><br><span class="line">SELECT LENGTH(&#39;张三丰hahaha&#39;);</span><br></pre></td></tr></table></figure><h3 id="CONCAT-s1-s2-…-sn"><a href="#CONCAT-s1-s2-…-sn" class="headerlink" title="CONCAT(s1, s2,…, sn)"></a>CONCAT(s1, s2,…, sn)</h3><p>拼接字符串</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 这里表示使用 _ 连接字段last_name和字段first_name</span><br><span class="line">SELECT CONCAT(last_name, &#39;_&#39;, first_name) 姓名 FROM employees;</span><br></pre></td></tr></table></figure><h3 id="UPPER-s"><a href="#UPPER-s" class="headerlink" title="UPPER(s)"></a>UPPER(s)</h3><p>将字符串转换为大写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT UPPER(&#39;tomcat&#39;);</span><br></pre></td></tr></table></figure><h3 id="LOWER-s"><a href="#LOWER-s" class="headerlink" title="LOWER(s)"></a>LOWER(s)</h3><p>将字符串转换为小写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT LOWER(&#39;tomCat&#39;);</span><br><span class="line"># 示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT CONCAT(UPPER(last_name), LOWER(first_name)) 姓名 FROM employees;</span><br></pre></td></tr></table></figure><h3 id="SUBSTR-s-start-length-、SUBSTRING"><a href="#SUBSTR-s-start-length-、SUBSTRING" class="headerlink" title="SUBSTR(s, start, length)、SUBSTRING()"></a>SUBSTR(s, start, length)、SUBSTRING()</h3><p>SUBSTR(s, start, length)：从字符串s的start位置截取长度为length的子字符串</p><p>截取字符串(<strong>注意：索引从1开始</strong>)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 从第7个字符开始截取（包括7）</span><br><span class="line">SELECT SUBSTR(&#39;日向雏田爱上了旋涡鸣人&#39;, 7) out_put;</span><br><span class="line"># SUBSTRING() 效果和SUBSTR()一致</span><br><span class="line">SELECT SUBSTRING(&#39;日向雏田爱上了旋涡鸣人&#39;, 7) out_put;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUBSTR(&#39;日向雏田爱上了旋涡鸣人&#39;, 1, 4) out_put;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来</span><br><span class="line">SELECT CONCAT(UPPER(SUBSTR(last_name, 1,1)), &#39;_&#39;, LOWER(SUBSTR(last_name, 2))) out_put FROM employees;</span><br></pre></td></tr></table></figure><h3 id="INSTR-s-s"><a href="#INSTR-s-s" class="headerlink" title="INSTR(s, s)"></a>INSTR(s, s)</h3><p>返回子串第一次出现的索引，如果找不到，返回0</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT INSTR(&#39;日向雏田爱上了漩涡鸣人，漩涡鸣人爱上了雏田&#39;, &#39;漩涡鸣人&#39;) AS out_put;</span><br></pre></td></tr></table></figure><h3 id="TRIM-s"><a href="#TRIM-s" class="headerlink" title="TRIM(s)"></a>TRIM(s)</h3><p>LTRIM(s)：去掉字符串s<strong>开始处</strong>的空格</p><p>RTRIM(s)：去掉字符串s<strong>结尾处</strong>的空格</p><p>去掉字符串开始和结尾处的空格：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(TRIM(&#39;       日向雏田      &#39;)) AS out_put;</span><br><span class="line"># 去除字符串前后指定的字符</span><br><span class="line">SELECT TRIM(&#39;a&#39; FROM &#39;aaaaa雏aa田aaaaaa&#39;);</span><br><span class="line"># aa会被当做一个整体</span><br><span class="line">SELECT TRIM(&#39;aa&#39; FROM &#39;aaaaa雏aa田aaaaaa&#39;);</span><br></pre></td></tr></table></figure><h3 id="LPAD-s1-len-s2"><a href="#LPAD-s1-len-s2" class="headerlink" title="LPAD(s1, len, s2)"></a>LPAD(s1, len, s2)</h3><p>在字符串s1的<strong>开始处</strong>填充字符串s2， 使字符串长度达到len，如果长度小于原字符串长度，则只取前len个字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT LPAD(&#39;日向雏田&#39;, 6, &#39;*&#39;) AS out_put; </span><br><span class="line"># result: **日向雏田</span><br><span class="line">SELECT LPAD(&#39;日向雏田&#39;, 2, &quot;*&quot;) AS out_put;</span><br><span class="line"># result: 日向</span><br></pre></td></tr></table></figure><h3 id="RPAD-s1-len-s2"><a href="#RPAD-s1-len-s2" class="headerlink" title="RPAD(s1, len, s2)"></a>RPAD(s1, len, s2)</h3><p>在字符串s1<strong>结尾处</strong>添加字符串s2，使字符串的长度达到len，如果长度小于原字符串，则只取前len个字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT RPAD(&#39;日向雏田&#39;, 6, &#39;*&#39;) AS out_put;</span><br><span class="line"># result：日向雏田**</span><br><span class="line">SELECT RPAD(&#39;日向雏田&#39;, 2, &#39;*&#39;) AS out_put;</span><br><span class="line"># result：日向 </span><br></pre></td></tr></table></figure><h3 id="REPLACE-s-s1-s2"><a href="#REPLACE-s-s1-s2" class="headerlink" title="REPLACE(s, s1, s2)"></a>REPLACE(s, s1, s2)</h3><p>用字符串 s2 替代字符串 s 中的字符串s1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT REPLACE(&#39;漩涡鸣人爱上了春野樱&#39;, &#39;春野樱&#39;, &#39;日向雏田&#39;) AS out_put;</span><br><span class="line"># result : 漩涡鸣人爱上了日向雏田</span><br></pre></td></tr></table></figure><h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><h3 id="ROUND-x"><a href="#ROUND-x" class="headerlink" title="ROUND(x)"></a>ROUND(x)</h3><p>ROUND(x, d)：四舍五入，保留d位小数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(-1.55); --&gt; -2</span><br><span class="line">SELECT ROUND(1.567, 2); --&gt; 1.57</span><br></pre></td></tr></table></figure><h3 id="CEIL-x"><a href="#CEIL-x" class="headerlink" title="CEIL(x)"></a>CEIL(x)</h3><p>向上取整</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT CEIL(-1.02); 	--&gt; -1</span><br><span class="line">SELECT CEIL(1.02);	  --&gt; 2</span><br></pre></td></tr></table></figure><h3 id="FLOOR-x"><a href="#FLOOR-x" class="headerlink" title="FLOOR(x)"></a>FLOOR(x)</h3><p>向下取整</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT FLOOR(-1.58); 	--&gt; -2</span><br><span class="line">SELECT FLOOR(1.58); 	--&gt; 1</span><br></pre></td></tr></table></figure><h3 id="TRUNCATE-x-y"><a href="#TRUNCATE-x-y" class="headerlink" title="TRUNCATE(x, y)"></a>TRUNCATE(x, y)</h3><p>返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是不会进行四舍五入）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT TRUNCATE(1.567, 2); 		--&gt; 1.56</span><br></pre></td></tr></table></figure><h3 id="MOD-x-y"><a href="#MOD-x-y" class="headerlink" title="MOD(x, y)"></a>MOD(x, y)</h3><p>*<em>MOD(x, y)的结果会等于：x - x / b * b*</em></p><p>返回 x 除以 y 以后的余数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT MOD(10, -3); 	--&gt; 1</span><br><span class="line"># 等价于</span><br><span class="line">SELECT 10%-3; 		--&gt; 1</span><br><span class="line"></span><br><span class="line"># 余数的符号取决于被除数的符号</span><br><span class="line">SELECT MOD(-10, 3);		--&gt; -1</span><br><span class="line">SELECT MOD(-10, -3);  	--&gt; -1</span><br></pre></td></tr></table></figure><h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><h3 id="NOW"><a href="#NOW" class="headerlink" title="NOW()"></a>NOW()</h3><p>返回当前系统时间(注：日期+时间)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();  	--&gt; 2019-12-17 00:38:55</span><br></pre></td></tr></table></figure><h3 id="CURDATE"><a href="#CURDATE" class="headerlink" title="CURDATE()"></a>CURDATE()</h3><p>返回当前系统日期，不包含时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURDATE(); 	--&gt; 2019-12-17</span><br></pre></td></tr></table></figure><h3 id="CURTIME"><a href="#CURTIME" class="headerlink" title="CURTIME()"></a>CURTIME()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURTIME();	--&gt; 00:41:45</span><br></pre></td></tr></table></figure><h3 id="YEAR-d"><a href="#YEAR-d" class="headerlink" title="YEAR(d)"></a>YEAR(d)</h3><p>返回年份</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT YEAR(NOW()); 	--&gt; 2019</span><br><span class="line">SELECT YEAR(&#39;1999-1-1&#39;); 	--&gt; 1999</span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT YEAR(hiredate) 入职时间 FROM employees;</span><br></pre></td></tr></table></figure><h3 id="MONTH-d"><a href="#MONTH-d" class="headerlink" title="MONTH(d)"></a>MONTH(d)</h3><p>返回日期 d 中的月份值，1到12</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MONTH(NOW()); 	--&gt; 12</span><br></pre></td></tr></table></figure><h3 id="MONTHNAME-d"><a href="#MONTHNAME-d" class="headerlink" title="MONTHNAME(d)"></a>MONTHNAME(d)</h3><p>返回日期当中的月份的英文名称，如 September</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MONTHNAME(NOW()); 	--&gt; December</span><br></pre></td></tr></table></figure><h3 id="STR-TO-DATE-s-f"><a href="#STR-TO-DATE-s-f" class="headerlink" title="STR_TO_DATE(s, f)"></a>STR_TO_DATE(s, f)</h3><p>将字符通过制定的格式转换成日期</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT STR_TO_DATE(&#39;1998-9-25&#39;, &#39;%Y-%c-%d&#39;) AS out_put; --&gt; 1998-09-25</span><br></pre></td></tr></table></figure><p>案例：查询入职时间为1992-4-3的员工信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees WHERE hiredate &#x3D; &#39;1992-4-3&#39;;</span><br><span class="line"># 或者</span><br><span class="line">SELECT * FROM employees WHERE hiredate &#x3D; STR_TO_DATE(&#39;4-3 1992&#39;, &#39;%c-%d %Y&#39;);</span><br></pre></td></tr></table></figure><h3 id="DATE-FORMAT-d-f"><a href="#DATE-FORMAT-d-f" class="headerlink" title="DATE_FORMAT(d, f)"></a>DATE_FORMAT(d, f)</h3><p>将日期通过指定的格式转换成字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATE_FORMAT(NOW(), &#39;%Y年%m月%d日&#39;) AS out_put；	--&gt; 2019年12月17日</span><br></pre></td></tr></table></figure><p>案例：查询有奖金的员工名和入职日期（xx月/xx日 xx年）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, DATE_FORMAT(hiredate, &#39;%m月&#x2F;%d日 %Y年&#39;) 入职日期</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure><h2 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h2><h3 id="VERSION"><a href="#VERSION" class="headerlink" title="VERSION()"></a>VERSION()</h3><p>返回数据库的版本号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure><h3 id="DATABASE"><a href="#DATABASE" class="headerlink" title="DATABASE()"></a>DATABASE()</h3><p>返回当前数据库名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure><h3 id="USER"><a href="#USER" class="headerlink" title="USER()"></a>USER()</h3><p>返回当前用户</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure><h3 id="PASSWORD-‘字符’"><a href="#PASSWORD-‘字符’" class="headerlink" title="PASSWORD(‘字符’)"></a>PASSWORD(‘字符’)</h3><p>返回该字符的密码形式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT PASSWORD(&#39;雏田&#39;);</span><br></pre></td></tr></table></figure><h3 id="MD5-‘字符’"><a href="#MD5-‘字符’" class="headerlink" title="MD5(‘字符’)"></a>MD5(‘字符’)</h3><p>返回该字符的md5加密形式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MD5(&#39;雏田&#39;);</span><br></pre></td></tr></table></figure><h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><h3 id="IF-expr-v1-v2"><a href="#IF-expr-v1-v2" class="headerlink" title="IF(expr, v1, v2)"></a>IF(expr, v1, v2)</h3><p>如果表达式 expr 成立，返回结果 v1， 否则返回结果 v2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT IF(1 &gt; 0, &#39;正确&#39;, &#39;错误&#39;); 	--&gt; 正确</span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, commission_pct, </span><br><span class="line">IF(commission_pct IS NULL, &#39;没奖金，日了狗了&#39;, &#39;有奖金，开心&#39;) 备注</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h3 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CASE expression</span><br><span class="line">	WHEN condition1 THEN result1</span><br><span class="line">	WHEN condition2 THEN result2</span><br><span class="line">	...</span><br><span class="line">	when conditionN	THEN resultN</span><br><span class="line">	ELSE result</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>CASE 表示函数开始，END 表示函数结束。如果condition1成立，则返回result1，如果condition2成立，则返回result2，当全部不成立则返回result，而当有一个成立之后，后面的就不执行了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE 要判断的字段或表达式</span><br><span class="line">WHEN 常量1 THEN 要显示的值1或语句1</span><br><span class="line">WHEN 常量2 THEN 要现实的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或者语句n</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>案例一：</p><p>查询员工的工资，要求：</p><ol><li>部门号=30，显示的工资为1.1倍</li><li>部门号=40，显示的工资为1.2倍</li><li>部门号=50，显示的工资为1.3倍</li><li>其他部门，显示的工资为原工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary 原工资, department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary * 1.1</span><br><span class="line">WHEN 40 THEN salary * 1.2</span><br><span class="line">WHEN 50 THEN salary * 1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><p>案例二：</p><p>查询员工的工资情况，要求：</p><ol><li>如果工资&gt;20000，显示A级别</li><li>如果工资&gt;15000，显示B级别</li><li>如果工资&gt;10000，显示C级别</li><li>否则，显示D级别</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary &gt; 20000 THEN &#39;A&#39;</span><br><span class="line">WHEN salary &gt; 15000 THEN &#39;B&#39;</span><br><span class="line">WHEN salary &gt; 10000 THEN &#39;C&#39;</span><br><span class="line">ELSE &#39;D&#39;</span><br><span class="line">END AS 工资级别</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h1 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h1><p>用作统计使用，又称为聚合函数或同级函数或组函数</p><h2 id="SUM-expression"><a href="#SUM-expression" class="headerlink" title="SUM(expression)"></a>SUM(expression)</h2><p>求和</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(salary) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="AVG-expression"><a href="#AVG-expression" class="headerlink" title="AVG(expression)"></a>AVG(expression)</h2><p>求平均值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="MAX-expression"><a href="#MAX-expression" class="headerlink" title="MAX(expression)"></a>MAX(expression)</h2><p>求最大值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(salary) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="MIN-expression"><a href="#MIN-expression" class="headerlink" title="MIN(expression)"></a>MIN(expression)</h2><p>求最小值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="COUNT-expression"><a href="#COUNT-expression" class="headerlink" title="COUNT(expression)"></a>COUNT(expression)</h2><p>计算个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(1) FROM employees;</span><br></pre></td></tr></table></figure><p><strong>效率：MYISAM 存储引擎下，COUNT(<code>*</code>)的效率高；INNODB存储引擎下，COUNT(<code>*</code>)和COUNT(1)的效率差不多，比COUNT(字段)效率要高一些；</strong><br>​ <strong>推荐使用COUNT(<code>*</code>)统计行数</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	SUM( salary ) 和,</span><br><span class="line">	AVG( salary ) 平均,</span><br><span class="line">	MAX( salary ) 最高,</span><br><span class="line">	MIN( salary ) 最低,</span><br><span class="line">	COUNT( salary ) 个数</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure><p>平均工资保留两位小数（四舍五入）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	SUM( salary ) 和,</span><br><span class="line">	ROUND(AVG( salary ), 2) 平均,</span><br><span class="line">	MAX( salary ) 最高,</span><br><span class="line">	MIN( salary ) 最低,</span><br><span class="line">	COUNT( salary ) 个数</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure><h2 id="支持哪些类型的参数"><a href="#支持哪些类型的参数" class="headerlink" title="支持哪些类型的参数"></a>支持哪些类型的参数</h2><h3 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h3><p>先试图将字符转换成数值，如果转换成功，则继续运算，否则转换成0，再做运算</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	SUM(last_name),</span><br><span class="line">	AVG(last_name)</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line">#----------------------------</span><br><span class="line"># result: 0  0</span><br></pre></td></tr></table></figure><p>与排序差不多</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	MAX( last_name ),</span><br><span class="line">	MIN( last_name )</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br><span class="line"># MAX(expr) 和 MIN(expr) 在对英文字符串比大小的时候，先比较首字母的大小（b &gt; a），如果首字母相同，则比较第二个字母的大小，以此类推</span><br></pre></td></tr></table></figure><h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(hiredate), AVG(hiredate) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MAX(hiredate), MIN(hiredate) FROM employees;</span><br></pre></td></tr></table></figure><h2 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h2><ol><li>SUM、AVG一般用于处理数值型</li><li>MAX、MIN、COUNT可以处理任何类型</li><li>以上分组函数都忽略NULL值</li><li>可以和DISTINCT搭配实现去重的运算</li><li>一般使用COUNT(*) 用作统计行数</li><li>和分组函数一同查询的字段要求是 GROUP BY后的字段</li></ol><h2 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h2><ol><li>查询员工表中的最大入职时间和最小入职时间的相差天数（DIFFRENCE）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	MAX( hiredate ) 最大,</span><br><span class="line">	MIN( hiredate ) 最小,</span><br><span class="line">	(MAX( hiredate ) - MIN( hiredate )) &#x2F; 1000 &#x2F; 3600 &#x2F; 24 AS DIFFRENCE</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br><span class="line">	-- 错误写法</span><br></pre></td></tr></table></figure><p>​ 使用DATEDIFF(d1, d2)函数，计算日期d1 ~ d2之间相隔的天数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATEDIFF(MAX(hiredate), MIN(hiredate)) AS DIFFRENCE FROM employees;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询部门编号为90的员工个数</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	COUNT(*)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &#x3D; 90;</span><br></pre></td></tr></table></figure><h1 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h1><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT 分组函数, 分组后的字段</span><br><span class="line">FROM 表</span><br><span class="line">[WHERE 筛选条件]</span><br><span class="line">GROUP BY 分组后的字段</span><br><span class="line">[HAVING 分组后的筛选]</span><br><span class="line">[ORDER BY 排序列表]</span><br></pre></td></tr></table></figure><h2 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h2><ol><li>和分组函数一同查询的字段<strong>必须</strong>是GROUP BY后出现的字段</li><li>筛选分为两类：分组前筛选和分组后筛选</li></ol><table><thead><tr><th align="center">筛选</th><th align="center">针对的表</th><th align="center">连接的关键字</th></tr></thead><tbody><tr><td align="center">分组前筛选</td><td align="center">原始表</td><td align="center">WHERE</td></tr><tr><td align="center">分组后筛选</td><td align="center">GROUP BY后的结果集</td><td align="center">HAVING</td></tr></tbody></table><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol><li><p>分组函数做筛选能不能放在WHERE后面</p><p>答案：不能，原表中没有分组后的数据</p></li></ol><h2 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h2><h3 id="简单的分组"><a href="#简单的分组" class="headerlink" title="简单的分组"></a>简单的分组</h3><ol><li>查询每个工种的员工平均工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary), job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询每个位置的部门个数</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*), location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br></pre></td></tr></table></figure><h3 id="分组前筛选"><a href="#分组前筛选" class="headerlink" title="分组前筛选"></a>分组前筛选</h3><ol><li>查询邮箱中包含a字符的 每个部门的最高工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(salary), department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure><ol start="2"><li>查询有奖金的每个领导手下员工的平均工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary), manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br></pre></td></tr></table></figure><h3 id="分组后筛选"><a href="#分组后筛选" class="headerlink" title="分组后筛选"></a>分组后筛选</h3><ol><li><p>查询哪个部门的员工个数&gt;5</p><p>1.1 首先查询每个部门的员工个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure><p>1.2 筛选1.1得到的结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING COUNT(*) &gt; 5;</span><br></pre></td></tr></table></figure></li><li><p>每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(salary), job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary) &gt; 12000;</span><br></pre></td></tr></table></figure><ol start="3"><li>领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT manager_id, MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id &gt; 102</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING MIN(salary) &gt; 5000;</span><br></pre></td></tr></table></figure><h3 id="添加排序"><a href="#添加排序" class="headerlink" title="添加排序"></a>添加排序</h3><ol><li>每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资，按最高工资升序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT job_id, MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary) &gt; 6000</span><br><span class="line">ORDER BY MAX(salary) ASC;</span><br></pre></td></tr></table></figure><h3 id="按多个字段分组"><a href="#按多个字段分组" class="headerlink" title="按多个字段分组"></a>按多个字段分组</h3><ol><li>查询每个工种每个部门的最低工资，并按最低工资降序</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT job_id, department_id, MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id, department_id</span><br><span class="line">ORDER BY MIN(salary) DESC;</span><br></pre></td></tr></table></figure><h1 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h1><h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p>连接查询又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段1, 字段2 FROM 表1, 表2,...；</span><br></pre></td></tr></table></figure><h2 id="笛卡尔乘积现象"><a href="#笛卡尔乘积现象" class="headerlink" title="笛卡尔乘积现象"></a>笛卡尔乘积现象</h2><p>当查询多个表时，没有添加有效的连接条件，导致多个表所有行实现完全连接</p><p>表1 有m行，表2 有n行，结果 = m * n 行</p><p>发生原因：没有有效的连接条件</p><p>如何避免：添加有效的连接条件</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>按年代分类：</p><ul><li>sql92标准：仅仅支持内连接</li><li>sql99标准【推荐】：支持内连接、外连接（左外连接和右外连接）、交叉连接</li></ul><p>按功能分类：</p><ul><li>内连接：<ol><li>等值连接</li><li>非等值连接</li><li>自连接</li></ol></li><li>外连接：<ol><li>左外连接</li><li>右外连接</li><li>全外连接（mysql不支持）</li></ol></li><li>交叉连接</li></ul><h2 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h2><ol><li>多表等值连接的结果为多表的交集部分</li><li>n表连接，至少需要n-1个连接条件</li><li>表的顺序没有要求</li><li>一般需要为表起别名</li><li>可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</li></ol><h3 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h3><ol><li><p>查询女神名和对应的男神名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT name, boyName</span><br><span class="line">FROM boys, beauty</span><br><span class="line">WHERE beauty.boyfriend_id &#x3D; boys.id;</span><br></pre></td></tr></table></figure></li><li><p>查询员工名和对应的部门名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, department_name</span><br><span class="line">FROM employees, departments</span><br><span class="line">WHERE employees.department_id &#x3D; departments.department_id;</span><br></pre></td></tr></table></figure></li></ol><h3 id="为表起别名"><a href="#为表起别名" class="headerlink" title="为表起别名"></a>为表起别名</h3><ol><li>提高语句的简洁度</li><li>区分多个重名的字段</li></ol><p><strong>注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</strong></p><ol><li><p>查询员工名、工种号、工种名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.last_name, </span><br><span class="line">	e.job_id, </span><br><span class="line">	j.job_title</span><br><span class="line">FROM </span><br><span class="line">	employees AS e, </span><br><span class="line">	jobs AS j</span><br><span class="line">WHERE </span><br><span class="line">	e.job_id &#x3D; j.job_id;</span><br></pre></td></tr></table></figure></li></ol><h3 id="加筛选条件"><a href="#加筛选条件" class="headerlink" title="加筛选条件"></a>加筛选条件</h3><ol><li><p>查询有奖金的员工名、部门名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.last_name, </span><br><span class="line">	d.department_name, </span><br><span class="line">	e.commission_pct</span><br><span class="line">FROM </span><br><span class="line">	employees e, </span><br><span class="line">	departments d</span><br><span class="line">WHERE </span><br><span class="line">	e.department_id &#x3D; d.department_id  </span><br><span class="line">	AND e.commission_pct IS NOT NULL; </span><br></pre></td></tr></table></figure></li><li><p>查询城市名中第二个字符为o的部门名和城市名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	department_name, </span><br><span class="line">	city</span><br><span class="line">FROM </span><br><span class="line">	departments d, </span><br><span class="line">	locations l</span><br><span class="line">WHERE </span><br><span class="line">	d.location_id &#x3D; l.location_id AND city LIKE &#39;_o%&#39;;</span><br></pre></td></tr></table></figure></li></ol><h3 id="加分组"><a href="#加分组" class="headerlink" title="加分组"></a>加分组</h3><ol><li><p>查询每个城市的部门个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	COUNT(*) 部门个数,</span><br><span class="line">	city</span><br><span class="line">FROM </span><br><span class="line">	departments d, locations l</span><br><span class="line">WHERE </span><br><span class="line">	d.location_id &#x3D; l.location_id</span><br><span class="line">GROUP BY </span><br><span class="line">	city;</span><br></pre></td></tr></table></figure></li><li><p>查询有奖金的每个部门的部门名和部门领导编号和该部门的最低工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	department_name, </span><br><span class="line">	d.manager_id, </span><br><span class="line">	MIN(salary)</span><br><span class="line">FROM </span><br><span class="line">	employees e,</span><br><span class="line">	departments d</span><br><span class="line">WHERE </span><br><span class="line">	d.department_id &#x3D; e.department_id AND commission_pct IS NOT NULL</span><br><span class="line">GROUP BY </span><br><span class="line">	department_name, d.manager_id;</span><br></pre></td></tr></table></figure></li><li><p>查询每个工种的工种名和员工的个数，并且按员工个数降序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	job_title,</span><br><span class="line">	COUNT(*)</span><br><span class="line">FROM </span><br><span class="line">	employees e,</span><br><span class="line">	jobs j</span><br><span class="line">WHERE</span><br><span class="line">	e.job_id &#x3D; j.job_id</span><br><span class="line">GROUP BY</span><br><span class="line">	job_title</span><br><span class="line">ORDER BY </span><br><span class="line">	COUNT(*) DESC;</span><br></pre></td></tr></table></figure></li><li><p>查询员工名、部门名和所在的城市，并且城市名以s开头，按部门名称降序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	d.department_name 部门名,</span><br><span class="line">	l.city 城市</span><br><span class="line">FROM </span><br><span class="line">	employees e,</span><br><span class="line">	departments d,</span><br><span class="line">	locations l</span><br><span class="line">WHERE</span><br><span class="line">	e.department_id &#x3D; d.department_id AND d.location_id &#x3D; l.location_id AND city LIKE &#39;s%&#39;</span><br><span class="line">ORDER BY</span><br><span class="line">	department_name DESC;</span><br></pre></td></tr></table></figure></li></ol><h2 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h2><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名, 表2 别名</span><br><span class="line">WHERE 非等值的连接条件</span><br><span class="line">[and 筛选条件]</span><br><span class="line">[GROUP BY 分组字段]</span><br><span class="line">[HAVING 分组后的筛选]</span><br><span class="line">[ORDER BY 排序字段]</span><br></pre></td></tr></table></figure><h3 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h3><ol><li><p>查询员工的工资和工资级别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.salary 工资,</span><br><span class="line">	j.grade_level 工资级别</span><br><span class="line">FROM</span><br><span class="line">	employees e,</span><br><span class="line">	job_grades j</span><br><span class="line">WHERE </span><br><span class="line">	e.salary BETWEEN j.lowest_sal AND j.highest_sal;</span><br></pre></td></tr></table></figure></li><li><p>查询员工的工资和工资级别并筛选出级别为A的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.salary 工资,</span><br><span class="line">	j.grade_level 工资级别</span><br><span class="line">FROM</span><br><span class="line">	employees e,</span><br><span class="line">	job_grades j</span><br><span class="line">WHERE</span><br><span class="line">	e.salary BETWEEN j.lowest_sal AND j.highest_sal AND j.grade_level &#x3D; &#39;A&#39;;</span><br></pre></td></tr></table></figure></li></ol><h2 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h2><h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表 别名1, 表 别名2</span><br><span class="line">WHERE 等值的连接条件</span><br><span class="line">[and 筛选条件]</span><br><span class="line">[GROUP BY 分组字段]</span><br><span class="line">[HAVING 分组后的筛选]</span><br><span class="line">[ORDER BY 排序字段]</span><br></pre></td></tr></table></figure><h3 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h3><ol><li><p>查询员工名和上级的名称</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	m.last_name 上级名称</span><br><span class="line">FROM </span><br><span class="line">	employees e,</span><br><span class="line">	employees m</span><br><span class="line">WHERE</span><br><span class="line">	e.manager_id &#x3D; m.employee_id;</span><br></pre></td></tr></table></figure></li></ol><h2 id="SQL99语法-内连接"><a href="#SQL99语法-内连接" class="headerlink" title="SQL99语法-内连接"></a>SQL99语法-内连接</h2><h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名</span><br><span class="line">[INNER] JOIN 表2 别名 ON 连接条件</span><br><span class="line">WHERE 筛选条件</span><br><span class="line">GROUP BY 分组列表</span><br><span class="line">HAVING 分组后的筛选</span><br><span class="line">ORDER BY 排序列表</span><br><span class="line">LIMIT 子句;</span><br></pre></td></tr></table></figure><h3 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h3><ol><li>表的顺序可以调换</li><li>内连接的结果 = 多表的交集</li><li>n表连接至少需要 n - 1 个连接条件</li><li>添加排序、分组、筛选</li><li>INNER 可以省略</li><li>筛选条件放在WHERE后面，连接条件放在ON后面，提高分离性，便于阅读</li><li>INNER JOIN连接和SQL92语法中的等值连接效果是一样的，都是查询多表的交集</li></ol><h3 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h3><ul><li>等值连接</li><li>非等值连接</li><li>自连接</li></ul><h3 id="内连接-等值连接案例"><a href="#内连接-等值连接案例" class="headerlink" title="内连接-等值连接案例"></a>内连接-等值连接案例</h3><ol><li><p>查询员工名、部门名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_name </span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	INNER JOIN departments d ON e.department_id &#x3D; d.department_id;</span><br></pre></td></tr></table></figure></li><li><p>查询名字中包含e的员工名和工种名(添加筛选)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	job_title</span><br><span class="line">FROM employees e</span><br><span class="line">	JOIN jobs j ON e.job_id &#x3D; j.job_id</span><br><span class="line">WHERE</span><br><span class="line">	e.last_name LIKE &#39;%e%&#39;;</span><br></pre></td></tr></table></figure></li><li><p>查询部门个数&gt;3的城市名和部门个数（添加分组+筛选）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	city 城市名,</span><br><span class="line">	COUNT(department_id) 部门个数</span><br><span class="line">FROM </span><br><span class="line">	locations l</span><br><span class="line">	JOIN departments d ON l.location_id &#x3D; d.location_id</span><br><span class="line">GROUP BY</span><br><span class="line">	l.city</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(department_id) &gt; 3;</span><br><span class="line"># 这里的 COUNT(department_id) 换成 COUNT(*)效果一致</span><br></pre></td></tr></table></figure></li><li><p>查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序 ( 添加排序 )</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	d.department_name 部门名,</span><br><span class="line">	count( * ) 员工个数 </span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN departments d ON e.department_id &#x3D; d.department_id </span><br><span class="line">GROUP BY</span><br><span class="line">	d.department_name </span><br><span class="line">HAVING</span><br><span class="line">	count( * ) &gt; 3 </span><br><span class="line">ORDER BY</span><br><span class="line">	count( * ) DESC;</span><br></pre></td></tr></table></figure></li><li><p>查询员工、部门名、工种名、并按部门名降序（添加三表连接）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	d.department_name 部门名,</span><br><span class="line">	j.job_title 工种名</span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN departments d ON e.department_id &#x3D; d.department_id</span><br><span class="line">	JOIN jobs j ON e.job_id &#x3D; j.job_id</span><br><span class="line">ORDER BY</span><br><span class="line">	d.department_name DESC;</span><br></pre></td></tr></table></figure></li></ol><h3 id="内连接-非等值连接案例"><a href="#内连接-非等值连接案例" class="headerlink" title="内连接-非等值连接案例"></a>内连接-非等值连接案例</h3><ol><li><p>查询员工的工资级别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	e.salary 薪水,</span><br><span class="line">	j.grade_level 工资级别</span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN job_grades j ON e.salary BETWEEN j.lowest_sal AND j.highest_sal;</span><br></pre></td></tr></table></figure></li><li><p>查询工资级别的个数&gt;20的个数，并且按工资级别降序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	j.grade_level 工资级别,</span><br><span class="line">	COUNT(*) 个数</span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN job_grades j ON e.salary BETWEEN j.lowest_sal AND j.highest_sal</span><br><span class="line">GROUP BY</span><br><span class="line">	j.grade_level</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(*) &gt; 20</span><br><span class="line">ORDER BY </span><br><span class="line">	j.grade_level DESC;</span><br></pre></td></tr></table></figure></li></ol><h3 id="内连接-自连接案例"><a href="#内连接-自连接案例" class="headerlink" title="内连接-自连接案例"></a>内连接-自连接案例</h3><ol><li><p>查询员工的名字、上级的名字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	m.last_name 上级名</span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN employees m ON e.manager_id &#x3D; m.employee_id;</span><br></pre></td></tr></table></figure></li><li><p>查询姓名中包含字符k的员工的名字、上级的名字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	e.last_name 员工名,</span><br><span class="line">	m.last_name 上级名</span><br><span class="line">FROM</span><br><span class="line">	employees e</span><br><span class="line">	JOIN employees m ON e.manager_id &#x3D; m.employee_id</span><br><span class="line">WHERE</span><br><span class="line">	e.last_name LIKE &#39;%k%&#39;;</span><br></pre></td></tr></table></figure></li></ol><h2 id="SQL99语法-外连接"><a href="#SQL99语法-外连接" class="headerlink" title="SQL99语法-外连接"></a>SQL99语法-外连接</h2><h3 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名</span><br><span class="line">LEFT|RIGHT|FULL[OUTER] JOIN 表2 别名 ON 连接条件</span><br><span class="line">WHERE 筛选条件</span><br><span class="line">GROUP BY 分组列表</span><br><span class="line">HAVING 分组后的筛选</span><br><span class="line">ORDER BY 排序列表</span><br><span class="line">LIMIT 子句;</span><br></pre></td></tr></table></figure><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>应用于查询一个表中有，另一个表中没有的记录</p><h3 id="特点-4"><a href="#特点-4" class="headerlink" title="特点"></a>特点</h3><ol><li><p>外连接的查询结果为主表中的所有记录，如果从表中有和它匹配的，则显示匹配的值；如果从表中没有和它匹配的，则显示null；</p><p>外连接查询结果 = 内连接结果 + 主表中有而从表没有的记录</p></li><li><p>左外连接，LEFT JOIN 左边的表是主表</p></li><li><p>右外连接，RIGHT JOIN 右边的表是主表</p></li><li><p>左外和右外交换两个表的顺序，可以实现同样的效果</p></li><li><p>全外连接 = 内连接的结果 + 表1中有但表2中没有的 + 表2中有但表1中没有的</p></li></ol><h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><ol><li><p>查询哪个部门没有员工</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	d.*</span><br><span class="line">FROM</span><br><span class="line">	departments d</span><br><span class="line">	LEFT JOIN employees e ON d.department_id &#x3D; e.department_id</span><br><span class="line">WHERE</span><br><span class="line">	e.department_id IS NULL;</span><br></pre></td></tr></table></figure></li></ol><h3 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h3><ol><li><p>查询哪个部门没有员工（调换位置使用RIGHT JOIN）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	d.*</span><br><span class="line">FROM </span><br><span class="line">	employees e</span><br><span class="line">	RIGHT JOIN departments d ON d.department_id &#x3D; e.department_id</span><br><span class="line">WHERE </span><br><span class="line">	e.department_id IS NULL;</span><br></pre></td></tr></table></figure></li></ol><h3 id="全外连接"><a href="#全外连接" class="headerlink" title="全外连接"></a>全外连接</h3><p><strong>mysql不支持全外连接</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USE girls;</span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">FULL OUTER JOIN boys bo</span><br><span class="line">ON b.&#96;boyfriend_id&#96; &#x3D; bo.id;</span><br></pre></td></tr></table></figure><p>beauty表中有其他的数据与boys表没有关系(就是这些女神还是单身)，就把boys表的那部分全部显示为空，</p><p>同样boys表有的beauty没有的也是显示null</p><h3 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h3><p>交叉连接返回左边中的所有行，坐标中的每一行与右表中的所有行组合。<strong>交叉连接也称作笛卡尔积</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.*, bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">CROSS JOIN boys bo;</span><br></pre></td></tr></table></figure><h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><h2 id="含义-1"><a href="#含义-1" class="headerlink" title="含义"></a>含义</h2><p>嵌套在其他语句内部的SELECT语句称为子查询或内查询，外面的语句可以是INSERT、UPDATE、DELETE、SELECT等，一般SELECT作为外面语句较多，外面如果为SELECT语句，则次语句称为外查询或主查询</p><h2 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h2><h3 id="按出现位置"><a href="#按出现位置" class="headerlink" title="按出现位置"></a>按出现位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT 后面：</span><br><span class="line">		仅仅支持标量子查询</span><br><span class="line">FROM 后面：</span><br><span class="line">		表子查询</span><br><span class="line">WHERE 或 HAVING后面：</span><br><span class="line">		标量子查询</span><br><span class="line">		列子查询</span><br><span class="line">		行子查询</span><br><span class="line">EXISTS 后面：</span><br><span class="line">		标量子查询</span><br><span class="line">		列子查询</span><br><span class="line">		行子查询</span><br><span class="line">		表子查询</span><br></pre></td></tr></table></figure><h3 id="按结果集的行列"><a href="#按结果集的行列" class="headerlink" title="按结果集的行列"></a>按结果集的行列</h3><p>标量子查询（单行子查询）：结果集为一行一列</p><p>列子查询（多行子查询）：结果集为多行一列</p><p>行子查询：结果集为多行多列</p><p>表子查询：结果集为多行多列</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><h3 id="WHERE或HAVING后面"><a href="#WHERE或HAVING后面" class="headerlink" title="WHERE或HAVING后面"></a>WHERE或HAVING后面</h3><ol><li>标量子查询（单行单列）</li><li>列子查询（多行单列）</li><li>行子查询（多行多列）</li></ol><h3 id="特点-5"><a href="#特点-5" class="headerlink" title="特点"></a>特点</h3><ol><li>子查询放在小括号内</li><li>子查询一般放在条件的右侧</li><li>标量子查询，一般搭配着单行操作符（&lt;、&gt;、&lt;=、&gt;=、=、&lt;&gt;）使用</li><li>列子查询，一般搭配着多行操作符（IN、ANY/SOME、ALL）使用</li><li>子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</li></ol><h3 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h3><ol><li><p>谁的工资比Abel搞？</p><p>① 先查询Abel的工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name &#x3D; &#39;Abel&#39;;</span><br></pre></td></tr></table></figure><p>② 查询员工的信息，满足salary &gt; ①的结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &gt; (</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name &#x3D; &#39;Abel&#39;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>返回job_id与141号员工相同，salary比143号员工多的员工姓名，job_id和工资</p><p>① 查询141号员工的job_id</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id &#x3D; 141;</span><br></pre></td></tr></table></figure><p>② 查询143号员工的salary</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id &#x3D; 143;</span><br></pre></td></tr></table></figure><p>③ 查询员工的姓名，job_id和工资，要求job_id=①并且salary &gt; ②</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, job_id, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id &#x3D; (</span><br><span class="line">	SELECT job_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id &#x3D; 141</span><br><span class="line">) AND salary &gt; (</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id &#x3D; 143</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>返回公司工资最少的员工的last_name, job_id和salary</p><p>① 查询公司的最低工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><p>② 查询last_name, job_id，要求salary = ①</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, job_id, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &#x3D; (</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>查询最低工资大于50号部门最低工资的部门的id和其最低工资</p><p>① 查询50号部门的最低工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id &#x3D; 50;</span><br></pre></td></tr></table></figure><p>② 查询每个部门的最低工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure><p>③ 在②的基础上，筛选MIN(salary) &gt; ①</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary) &gt; (</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id &#x3D; 50</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>非法使用标量子查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary),department_id </span><br><span class="line">FROM employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING MIN(salary)&gt;(     </span><br><span class="line">    SELECT  salary     </span><br><span class="line">    FROM employees     </span><br><span class="line">    WHERE department_id &#x3D; 250 </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>这里250号部门不存在，是查不出结果的，没有结果就不是标量子查询(结果不是一行一列)，所以这样非法的，会报错</p></li></ol><h3 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h3><table><thead><tr><th align="center">操作符</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">IN|NOT IN</td><td align="center">等于或不等于列表中的任意一个</td></tr><tr><td align="center">ANY|SOME</td><td align="center">和子查询返回的某一个值比较</td></tr><tr><td align="center">ALL</td><td align="center">和子查询返回的所有值比较</td></tr></tbody></table><ol><li><p>返回location_id是1400或1700的部门中的所有员工</p><p>① 查询location_id是1400或1700的部门标号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id IN(1400, 1700);</span><br></pre></td></tr></table></figure><p>② 查询员工姓名，要求部门号是①列表中的某一个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">    FROM departments</span><br><span class="line">    WHERE location_id IN(1400, 1700)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>返回其它工种中比job_id为“IT_PROG”工种任一工资低的员工的员工号、姓名、job_id以及salary</p><p>① 查询job_id为“IT_PROG”部门任一工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id &#x3D; &#39;IT_PROG&#39;;</span><br></pre></td></tr></table></figure><p>② 查询员工号、姓名、job_id、以及salary，salary&lt;(①)的任意一个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name, employee_id, job_id, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &lt; ANY(</span><br><span class="line">	SELECT DISTINCT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">) AND job_id &lt;&gt; &#39;IT_PROG&#39;;</span><br></pre></td></tr></table></figure><p>或者(小于最大值，就肯定满足任意一个)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">    SELECT MAX(salary)</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br></pre></td></tr></table></figure></li><li><p>返回其它工种中比job_id为‘IT_PROG’工种所有工资都低的员工 的员工号、姓名、job_id 以及salary</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ALL(</span><br><span class="line">    SELECT DISTINCT salary</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br></pre></td></tr></table></figure><p>或者（小于最小的）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">    SELECT MIN( salary)</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br></pre></td></tr></table></figure></li></ol><h3 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h3><ol><li><p>查询员工编号最小并且工资最高的员工信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE (employee_id,salary)&#x3D;(</span><br><span class="line">    SELECT MIN(employee_id),MAX(salary)</span><br><span class="line">    FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id&#x3D;(</span><br><span class="line">    SELECT MIN(employee_id)</span><br><span class="line">    FROM employees</span><br><span class="line">)AND salary&#x3D;(</span><br><span class="line">    SELECT MAX(salary)</span><br><span class="line">    FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ol><h3 id="SELECT后面"><a href="#SELECT后面" class="headerlink" title="SELECT后面"></a>SELECT后面</h3><p>仅仅支持标量子查询</p><ol><li><p>查询每个部门的员工个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT d.*,(</span><br><span class="line">    SELECT COUNT(*)</span><br><span class="line">    FROM employees e</span><br><span class="line">    WHERE e.department_id &#x3D; d.&#96;department_id&#96;</span><br><span class="line"> ) 个数</span><br><span class="line"> FROM departments d;</span><br></pre></td></tr></table></figure><p>或者（使用外连接）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    d.*,</span><br><span class="line">    count( e.employee_id ) 个数 </span><br><span class="line">FROM</span><br><span class="line">    employees e</span><br><span class="line">    RIGHT JOIN departments d ON e.department_id &#x3D; d.department_id </span><br><span class="line">GROUP BY</span><br><span class="line">    d.department_id;</span><br></pre></td></tr></table></figure></li><li><p>查询员工号=102的部门名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_id,( </span><br><span class="line">    SELECT department_name </span><br><span class="line">    FROM departments d </span><br><span class="line">    WHERE department_id &#x3D; e.department_id </span><br><span class="line">) </span><br><span class="line">FROM</span><br><span class="line">    employees e </span><br><span class="line">WHERE</span><br><span class="line">    e.employee_id &#x3D; 102;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_name,e.department_id</span><br><span class="line">    FROM departments d</span><br><span class="line">    INNER JOIN employees e</span><br><span class="line">    ON d.department_id&#x3D;e.department_id</span><br><span class="line">    WHERE e.employee_id&#x3D;102;</span><br></pre></td></tr></table></figure></li></ol><h3 id="FROM后面"><a href="#FROM后面" class="headerlink" title="FROM后面"></a>FROM后面</h3><p>将子查询结果充当一张表，要求必须起别名</p><ol><li><p>查询每个部门的平均工资的工资等级</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT  ag_dep.*,g.&#96;grade_level&#96;</span><br><span class="line">FROM (</span><br><span class="line">    SELECT AVG(salary) ag,department_id</span><br><span class="line">    FROM employees</span><br><span class="line">    GROUP BY department_id</span><br><span class="line">) ag_dep</span><br><span class="line">INNER JOIN job_grades g</span><br><span class="line">ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;</span><br></pre></td></tr></table></figure></li></ol><h3 id="EXISTS后面-相关子查询"><a href="#EXISTS后面-相关子查询" class="headerlink" title="EXISTS后面(相关子查询)"></a>EXISTS后面(相关子查询)</h3><p>判断子查询是否存在结果，存在返回1，不存在返回0，可用于筛选判断</p><ol><li><p>查询有员工的部门名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">    SELECT *</span><br><span class="line">    FROM employees e</span><br><span class="line">    WHERE d.&#96;department_id&#96;&#x3D;e.&#96;department_id&#96;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>查询没有女朋友的男神信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE NOT EXISTS(</span><br><span class="line">    SELECT boyfriend_id</span><br><span class="line">    FROM beauty b</span><br><span class="line">    WHERE bo.&#96;id&#96;&#x3D;b.&#96;boyfriend_id&#96;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE bo.id NOT IN(</span><br><span class="line">    SELECT boyfriend_id</span><br><span class="line">    FROM beauty</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>能用EXISTS的地方就都能用IN替代</p></li></ol><h1 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h1><h2 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h2><p>当要显示的数据，一页显示不全，需要分页提交sql请求</p><h2 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">    from 表</span><br><span class="line">    【join type】 join 表2</span><br><span class="line">    on 连接条件</span><br><span class="line">    where 筛选条件</span><br><span class="line">    group by 分组字段</span><br><span class="line">    having 分组后的筛选</span><br><span class="line">    order by 排序的字段】</span><br><span class="line">    limit 【offset,】size;</span><br></pre></td></tr></table></figure><p>offset 要显示条目的起始索引（起始索引从0开始）<br>​ size 要显示的条目个数</p><h2 id="分页公式"><a href="#分页公式" class="headerlink" title="分页公式"></a>分页公式</h2><p>(page - 1) * size, size</p><h2 id="案例-6"><a href="#案例-6" class="headerlink" title="案例"></a>案例</h2><ol><li><p>查询前五条员工信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees LIMIT 0, 5;</span><br><span class="line"># 或者</span><br><span class="line">SELECT * FROM employees LIMIT 5；</span><br></pre></td></tr></table></figure></li><li><p>查询第11条~第25条员工信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees LIMIT 10, 15;</span><br></pre></td></tr></table></figure></li><li><p>有奖金的员工信息，并且工资较高的前10名显示出来</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">ORDER BY salary DESC </span><br><span class="line">LIMIT 10;</span><br></pre></td></tr></table></figure></li></ol><h1 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h1><p>合并、联合，将多次查询结果合并成一个结果</p><h2 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句1</span><br><span class="line">union 【all】</span><br><span class="line">查询语句2</span><br><span class="line">union 【all】</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h2><ol><li>将一条比较复杂的查询语句拆分成多条语句</li><li>适用于查询多个表的时候，查询的列基本是一致</li></ol><h2 id="特点-6"><a href="#特点-6" class="headerlink" title="特点"></a>特点</h2><ol><li>要求多条查询语句的查询列数是一致的！</li><li>要求多条查询语句的查询的每一列的类型和顺序最好一致</li><li>UNION关键字默认去重，如果使用UNION ALL可以包含重复项</li></ol><h2 id="案例-7"><a href="#案例-7" class="headerlink" title="案例"></a>案例</h2><ol><li><p>查询部门编号&gt;90或邮箱包含a的员工信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees WHERE email LIKE &#39;%a%&#39; OR department_id&gt;90;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees  WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM employees  WHERE department_id&gt;90;</span><br></pre></td></tr></table></figure></li></ol><h1 id="DML-数据操纵语言"><a href="#DML-数据操纵语言" class="headerlink" title="DML(数据操纵语言)"></a>DML(数据操纵语言)</h1><p>DML(Data Manipulation Language - 数据操纵语言) 可以在下列条件下执行：</p><ul><li>向表中插入数据</li><li>修改现存数据</li><li>删除现存数据</li></ul><p><strong>事务是由完成若干项工作的DML语句组成的</strong></p><p>运行以下脚本创建表my_employees</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">CREATE TABLE my_employees(</span><br><span class="line">    Id INT(10),</span><br><span class="line">    First_name VARCHAR(10),</span><br><span class="line">    Last_name VARCHAR(10),</span><br><span class="line">    Userid VARCHAR(10),</span><br><span class="line">    Salary DOUBLE(10,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE users(</span><br><span class="line">    id INT,</span><br><span class="line">    userid VARCHAR(10),</span><br><span class="line">    department_id INT</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>显示表my_employees的结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC my_employees;</span><br></pre></td></tr></table></figure><h2 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h2><h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名(字段名,...) values(值,...);</span><br></pre></td></tr></table></figure><p><strong>特点：</strong></p><ol><li><p>要求值的类型和字段的类型要一致或兼容</p></li><li><p>字段的个数和顺序不一定与原始表中的字段个数和顺序一致</p><p><strong>但必须保证值和字段一一对应</strong></p></li><li><p>假如表中有可以为null的字段，注意可以通过以下两种方式插入null值</p><p>① 字段和值都省略</p><p>② 字段写上，值使用null</p></li><li><p>字段和值的个数必须一致</p></li><li><p>字段名可以省略，默认所有列</p></li></ol><h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名 set 字段&#x3D;值,字段&#x3D;值,...;</span><br></pre></td></tr></table></figure><p><strong>两种方式的区别：</strong></p><ol><li><p>方式一支持一次插入多行，语法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名【(字段名,..)】 values(值，..),(值，...),...;</span><br></pre></td></tr></table></figure></li><li><p>方式一支持子查询，语法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure></li></ol><h3 id="向表中插入数据"><a href="#向表中插入数据" class="headerlink" title="向表中插入数据"></a>向表中插入数据</h3><p>向my_employees表中插入下列数据</p><table><thead><tr><th align="center">ID</th><th align="center">FIRST_NAME</th><th align="center">LAST_NAME</th><th align="center">USERID</th><th align="center">SALARY</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">patel</td><td align="center">Ralph</td><td align="center">Rpatel</td><td align="center">895</td></tr><tr><td align="center">2</td><td align="center">Dancs</td><td align="center">Betty</td><td align="center">Bdancs</td><td align="center">860</td></tr><tr><td align="center">3</td><td align="center">Biri</td><td align="center">Ben</td><td align="center">Bbiri</td><td align="center">1100</td></tr><tr><td align="center">4</td><td align="center">Newman</td><td align="center">Chad</td><td align="center">Cnewman</td><td align="center">750</td></tr><tr><td align="center">5</td><td align="center">Ropeburn</td><td align="center">Audrey</td><td align="center">Aropebur</td><td align="center">155</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO my_employees</span><br><span class="line">VALUES</span><br><span class="line">    ( 1, &#39;patel&#39;, &#39;Ralph&#39;, &#39;Rpatel&#39;, 895 ),</span><br><span class="line">    ( 2, &#39;Dancs&#39;, &#39;Betty&#39;, &#39;Bdancs&#39;, 860 ),</span><br><span class="line">    ( 3, &#39;Biri&#39;, &#39;Ben&#39;, &#39;Bbiri&#39;, 1100 ),</span><br><span class="line">    ( 4, &#39;Newman&#39;, &#39;Chad&#39;, &#39;Cnewman&#39;, 750 ),</span><br><span class="line">    ( 5, &#39;Ropeburn&#39;, &#39;Audrey&#39;, &#39;Aropebur&#39;, 1550 );</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 先删除表数据</span><br><span class="line">DELETE FROM my_employees;</span><br><span class="line"># 再插入</span><br><span class="line">INSERT INTO my_employees</span><br><span class="line">SELECT 1,&#39;patel&#39;,&#39;Ralph&#39;,&#39;Rpatel&#39;,895 UNION</span><br><span class="line">SELECT 2,&#39;Dancs&#39;,&#39;Betty&#39;,&#39;Bdancs&#39;,860 UNION</span><br><span class="line">SELECT 3,&#39;Biri&#39;,&#39;Ben&#39;,&#39;Bbiri&#39;,1100 UNION</span><br><span class="line">SELECT 4,&#39;Newman&#39;,&#39;Chad&#39;,&#39;Cnewman&#39;,750 UNION</span><br><span class="line">SELECT 5,&#39;Ropeburn&#39;,&#39;Audrey&#39;,&#39;Aropebur&#39;,1550;</span><br></pre></td></tr></table></figure><p>向users表中插入数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO users</span><br><span class="line">VALUES</span><br><span class="line">    ( 1, &#39;Rpatel&#39;, 10 ),</span><br><span class="line">    ( 2, &#39;Bdancs&#39;, 10 ),</span><br><span class="line">    ( 3, &#39;Bbiri&#39;, 20 );</span><br></pre></td></tr></table></figure><h2 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h2><h3 id="修改单表的记录"><a href="#修改单表的记录" class="headerlink" title="修改单表的记录"></a>修改单表的记录</h3><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update 表名 set 字段&#x3D;值,字段&#x3D;值 【where 筛选条件】;</span><br></pre></td></tr></table></figure><ol><li><p>将3号员工的last_name修改为“drelxer”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE my_employees SET last_name&#x3D;&#39;drelxer&#39; WHERE id &#x3D; 3;</span><br></pre></td></tr></table></figure></li><li><p>将所有工资少于900的员工的工资修改为1000</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE my_employees SET salary&#x3D;1000 WHERE salary&lt;900;</span><br></pre></td></tr></table></figure></li></ol><h3 id="修改多表的记录"><a href="#修改多表的记录" class="headerlink" title="修改多表的记录"></a>修改多表的记录</h3><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">update 表1 别名 </span><br><span class="line">left|right|inner join 表2 别名 </span><br><span class="line">on 连接条件  </span><br><span class="line">set 字段&#x3D;值,字段&#x3D;值 </span><br><span class="line">【where 筛选条件】;</span><br></pre></td></tr></table></figure><h2 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h2><h3 id="删除单表的记录"><a href="#删除单表的记录" class="headerlink" title="删除单表的记录"></a>删除单表的记录</h3><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名 【where 筛选条件】【limit 条目数】</span><br></pre></td></tr></table></figure><h3 id="级联删除"><a href="#级联删除" class="headerlink" title="级联删除"></a>级联删除</h3><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete 别名1,别名2 from 表1 别名 </span><br><span class="line">inner|left|right join 表2 别名 </span><br><span class="line">on 连接条件</span><br><span class="line"> 【where 筛选条件】</span><br></pre></td></tr></table></figure><ol><li><p>将userid 为Bbiri的user表和my_employees表的记录全部删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELETE u,e </span><br><span class="line">FROM</span><br><span class="line">    users u</span><br><span class="line">    JOIN my_employees e </span><br><span class="line">ON u.&#96;userid&#96; &#x3D; e.&#96;Userid&#96; </span><br><span class="line">WHERE</span><br><span class="line">    u.&#96;userid&#96; &#x3D; &#39;Bbiri&#39;;</span><br></pre></td></tr></table></figure></li><li><p>删除所有数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM my_employees;</span><br><span class="line">DELETE FROM users;</span><br></pre></td></tr></table></figure></li></ol><h2 id="TRUNCATE"><a href="#TRUNCATE" class="headerlink" title="TRUNCATE"></a>TRUNCATE</h2><p>清空表</p><h3 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure><h2 id="DELETE和TRUNCATE的区别"><a href="#DELETE和TRUNCATE的区别" class="headerlink" title="DELETE和TRUNCATE的区别"></a>DELETE和TRUNCATE的区别</h2><ol><li>TRUNCATE删除后，如果再插入，标识列从1开始。DELETE删除后，如果再插入，标识列从断点开始</li><li>DELETE可以添加筛选条件，TRUNCATE不可以添加筛选条件</li><li>TRUNCATE效率较高</li><li>TRUNCATE没有返回值，DELETE可以返回受影响的行数</li><li>TRUNCATE不可以回滚，DELETE可以回滚</li></ol><h1 id="DDL-数据定义语言"><a href="#DDL-数据定义语言" class="headerlink" title="DDL(数据定义语言)"></a>DDL(数据定义语言)</h1><p>DDL(Data Definition Language)：数据定义语言，用来定义数据库对象（数据库、表、列等）。</p><p><strong>关键字：CREATE、ALTER、DROP等</strong></p><ul><li>CREATE：创建</li><li>ALTER：修改</li><li>DROP：删除</li></ul><h2 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h2><h3 id="创建库"><a href="#创建库" class="headerlink" title="创建库"></a>创建库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database 【if not exists】 库名【 character set 字符集名】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE IF NOT EXISTS books;</span><br></pre></td></tr></table></figure><h3 id="修改库"><a href="#修改库" class="headerlink" title="修改库"></a>修改库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database 库名 character set 字符集名;</span><br></pre></td></tr></table></figure><h3 id="修改库名"><a href="#修改库名" class="headerlink" title="修改库名"></a>修改库名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME DATABASE books TO 新库名;</span><br></pre></td></tr></table></figure><h3 id="修改库的字符集"><a href="#修改库的字符集" class="headerlink" title="修改库的字符集"></a>修改库的字符集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE books CHARACTER SET gbk;</span><br></pre></td></tr></table></figure><h3 id="删除库"><a href="#删除库" class="headerlink" title="删除库"></a>删除库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database 【if exists】 库名;</span><br></pre></td></tr></table></figure><h2 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h2><h3 id="创建表-1"><a href="#创建表-1" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">    列名 列的类型【(长度) 约束】,</span><br><span class="line">    列名 列的类型【(长度) 约束】,</span><br><span class="line">    列名 列的类型【(长度) 约束】,</span><br><span class="line">    ...</span><br><span class="line">    列名 列的类型【(长度) 约束】</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>创建表 book表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE book ( </span><br><span class="line">    id INT, #编号</span><br><span class="line">    bName VARCHAR ( 20 ), #图书名</span><br><span class="line">    price DOUBLE, #价格</span><br><span class="line">    authorId INT, #作者编号</span><br><span class="line">    publishDate DATETIME #出版日期</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>查看book表结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC book;</span><br></pre></td></tr></table></figure><p>创建表 author</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS author(</span><br><span class="line">    id INT,</span><br><span class="line">    au_name VARCHAR(20),</span><br><span class="line">    nation VARCHAR(10)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><h4 id="添加列"><a href="#添加列" class="headerlink" title="添加列"></a>添加列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add column 列名 类型 【first|after 字段名】;</span><br></pre></td></tr></table></figure><h4 id="修改列的类型或约束"><a href="#修改列的类型或约束" class="headerlink" title="修改列的类型或约束"></a>修改列的类型或约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify column 列名 新类型 【新约束】;</span><br></pre></td></tr></table></figure><h4 id="修改列名"><a href="#修改列名" class="headerlink" title="修改列名"></a>修改列名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 change column 旧列名 新列名 类型;</span><br></pre></td></tr></table></figure><h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop column 列名;</span><br></pre></td></tr></table></figure><h4 id="表名"><a href="#表名" class="headerlink" title="表名"></a>表名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 rename 【to】 新表名;</span><br></pre></td></tr></table></figure><h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table【if exists】 表名;</span><br></pre></td></tr></table></figure><h3 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h3><h4 id="复制表的结构"><a href="#复制表的结构" class="headerlink" title="复制表的结构"></a>复制表的结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table 表名 like 旧表;</span><br></pre></td></tr></table></figure><h4 id="复制表的结构-数据"><a href="#复制表的结构-数据" class="headerlink" title="复制表的结构+数据"></a>复制表的结构+数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table 表名 </span><br><span class="line">select 查询列表 from 旧表【where 筛选】;</span><br></pre></td></tr></table></figure><h4 id="案例-8"><a href="#案例-8" class="headerlink" title="案例"></a>案例</h4><ol><li><p>向author表插入数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO author</span><br><span class="line">VALUES</span><br><span class="line">    ( 1, &#39;村上春树&#39;, &#39;日本&#39; ),</span><br><span class="line">    ( 2, &#39;莫言&#39;, &#39;中国&#39; ),</span><br><span class="line">    ( 3, &#39;冯唐&#39;, &#39;中国&#39; ),</span><br><span class="line">    ( 4, &#39;金庸&#39;, &#39;中国&#39; );</span><br></pre></td></tr></table></figure></li><li><p>创建表copy，复制author表的结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy LIKE author;</span><br></pre></td></tr></table></figure></li><li><p>创建表copy2，复制author表的结构和数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy2 </span><br><span class="line">SELECT * FROM author;</span><br></pre></td></tr></table></figure></li><li><p>创建表copy3，复制author表的部分数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy3</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author </span><br><span class="line">WHERE nation&#x3D;&#39;中国&#39;;</span><br></pre></td></tr></table></figure></li><li><p>创建表copy4，复制author表的部分字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copy4 </span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE 0;</span><br></pre></td></tr></table></figure></li></ol><h2 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><p><img data-src="/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576832538927.png" alt="1576832538927"></p><h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><p>TINYINT、SMALLINT、MEDIUMINT、INT/INTEGER、BIGINT</p><p>特点：</p><ol><li>都可以设置无符号和有符号，默认有符号，通过 UNSIGNED 设置无符号</li><li>如果超出了范围，会报out or range异常，插入临界值</li><li>长度可以不指定，默认会有一个长度，长度代表显示的最大宽度，如果不够则左边用0填充，但需要搭配ZEROFILL，并且默认变为无符号整型</li></ol><p>如何设置无符号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_int(</span><br><span class="line">    t1 INT,</span><br><span class="line">    t2 INT unsigned </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>显示长度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_int(</span><br><span class="line">    t1 INT(7) ZEROFILL,</span><br><span class="line">    t2 INT(7) ZEROFILL </span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><p><strong>定点数：</strong>DECIMAL(M,D)</p><p><strong>浮点数：</strong>FLOAT(M,D) DOUBLE(M,D)</p><p><strong>特点：</strong></p><ol><li>M代表整数部位+小数部位的个数，D代表小数部位</li><li>如果超出范围，则报out or range异常，并且插入临界值</li><li>M和D都可以省略，但对于定点数，M默认为10，D默认为0</li><li>如果精度要求较高，则优先考虑使用定点数</li></ol><h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><p><img data-src="/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576833229769.png" alt="1576833229769"></p><p>char、varchar、binary、varbinary、enum(用于保存枚举)、set(用于保存集合)、text、blob</p><p>char：固定长度的字符，写法为char(M)，最大长度不能超过M，其中M可以省略，默认为1</p><p>varchar：可变长度的字符，写法为varchar(M)，最大长度不能超过M，其中M不可以省略</p><p>Enum：又称为枚举类型哦，要求插入的值必须属于列表中指定的值之一。</p><p>Set：和Enum类型类似，里面可以保存0~64个成员。和Enum类型最大的区别是：SET类型一次可以选取多个成员，而Enum只能选一个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_char(</span><br><span class="line">    c1 ENUM(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;b&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;c&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;m&#39;);    --&gt; 会插入空字符 &#39;&#39;</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;A&#39;);    --&gt;  会插入 &#39;a&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_set(</span><br><span class="line">    s1 SET(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;A,B&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a,c,d&#39;);</span><br></pre></td></tr></table></figure><h3 id="日期型"><a href="#日期型" class="headerlink" title="日期型"></a>日期型</h3><p><img data-src="/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1576833502245.png" alt="1576833502245"></p><p>year年 date日期 time时间 datetime 日期+时间 timestamp 日期+时间 ，比较容易受时区、语法模式、版本的影响，更能反映当前时区的真实时间</p><h2 id="常见的约束"><a href="#常见的约束" class="headerlink" title="常见的约束"></a>常见的约束</h2><ul><li>NOT NULL：非空，该字段的值必填</li><li>UNIQUE：唯一，该字段的值不可重复，可以为空</li><li>DEFAULT：默认，该字段的值不用手动插入有默认值</li><li>CHECK：检查，mysql不支持（但是设置并不会报错，只是没有效果）</li><li>PRIMARY KEY：主键，该字段的值不可重复并且非空 unique+not null</li><li>FOREIGN KEY：外键，该字段的值引用了另外的表的字段</li></ul><p><strong>添加约束的时机</strong></p><ol><li>创建表时</li><li>修改表时(在添加数据之前)</li></ol><p><strong>约束的添加的分类：</strong></p><ol><li><p>列级约束：</p><p>六大约束语法上都支持，但外键约束没有效果</p></li><li><p>表级约束：</p><p>除了非空、默认，其他的都支持</p></li></ol><h3 id="主键和唯一"><a href="#主键和唯一" class="headerlink" title="主键和唯一"></a>主键和唯一</h3><p><strong>区别：</strong></p><ol><li>一个表至多有一个主键，但可以有多个唯一</li><li>主键不允许为空，唯一可以为空</li></ol><table><thead><tr><th align="center"></th><th align="center">保证唯一性</th><th align="center">是否允许为空</th><th align="center">一个表中可以有多少个</th><th align="center">是否允许组合</th></tr></thead><tbody><tr><td align="center">主键</td><td align="center">√</td><td align="center">×</td><td align="center">至多有1个</td><td align="center">√，但不推荐</td></tr><tr><td align="center">唯一</td><td align="center">√</td><td align="center">√</td><td align="center">可以有多个</td><td align="center">√，但不推荐</td></tr></tbody></table><p><strong>外键：</strong></p><ol><li>要求在从表设置外键关系</li><li>从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</li><li>主表的关联列<code>必须是一个key</code>（一般是主键或唯一）</li><li>插入数据时，先插入主表，再插入从表</li><li>删除数据时，先删除从表，再删除主表</li></ol><h3 id="创建表时添加约束"><a href="#创建表时添加约束" class="headerlink" title="创建表时添加约束"></a>创建表时添加约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">    字段名 字段类型 列级约束,</span><br><span class="line">    字段名 字段类型,</span><br><span class="line">    表级约束</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="添加列级约束"><a href="#添加列级约束" class="headerlink" title="添加列级约束"></a>添加列级约束</h3><p>直接在字段名和类型后面追加 约束类型即可。</p><p>只支持：默认、非空、主键、唯一</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个数据库</span><br><span class="line">CREATE DATABASE students;</span><br><span class="line">USE students;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">    id INT PRIMARY KEY,#主键</span><br><span class="line">    stuName VARCHAR ( 20 ) NOT NULL UNIQUE,#非空并且唯一</span><br><span class="line">    gender CHAR ( 1 ) CHECK ( gender &#x3D; &#39;男&#39; OR gender &#x3D; &#39;女&#39; ),#检查</span><br><span class="line">    seat INT UNIQUE,#唯一</span><br><span class="line">    age INT DEFAULT 18,#默认约束</span><br><span class="line">    majorId INT REFERENCES major ( id ) #外键，(没有效果)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE major(</span><br><span class="line">    id INT PRIMARY KEY,</span><br><span class="line">    majorName VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 查看stuinfo中的所有索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure><h3 id="添加表级约束"><a href="#添加表级约束" class="headerlink" title="添加表级约束"></a>添加表级约束</h3><p>在各个字段的最下面</p><p>【constraint 约束名】 约束类型(字段名)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">    id INT,</span><br><span class="line">    stuname VARCHAR ( 20 ),</span><br><span class="line">    gender CHAR ( 1 ),</span><br><span class="line">    seat INT,</span><br><span class="line">    age INT,</span><br><span class="line">    majorid INT,</span><br><span class="line">    CONSTRAINT pk PRIMARY KEY ( id ),#主键</span><br><span class="line">    CONSTRAINT uq UNIQUE ( seat ),#唯一键</span><br><span class="line">    CONSTRAINT ck CHECK ( gender &#x3D; &#39;男&#39; OR gender &#x3D; &#39;女&#39; ),#检查</span><br><span class="line">    CONSTRAINT fk_stuinfo_major FOREIGN KEY ( majorid ) REFERENCES major ( id ) #外键</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="通用写法"><a href="#通用写法" class="headerlink" title="通用写法"></a>通用写法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS stuinfo (</span><br><span class="line">        id INT PRIMARY KEY,</span><br><span class="line">        stuname VARCHAR ( 20 ),</span><br><span class="line">        sex CHAR ( 1 ),</span><br><span class="line">        age INT DEFAULT 18,</span><br><span class="line">        seat INT UNIQUE,</span><br><span class="line">        majorid INT,</span><br><span class="line">    CONSTRAINT fk_stuinfo_major FOREIGN KEY ( majorid ) REFERENCES major ( id ) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="修改表时添加约束"><a href="#修改表时添加约束" class="headerlink" title="修改表时添加约束"></a>修改表时添加约束</h3><ul><li><p>添加列级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br></pre></td></tr></table></figure></li><li><p>添加表级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">    id INT,</span><br><span class="line">    stuname VARCHAR(20),</span><br><span class="line">    gender CHAR(1),</span><br><span class="line">    seat INT,</span><br><span class="line">    age INT,</span><br><span class="line">    majorid INT</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul><ol><li><p>添加非空约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;</span><br></pre></td></tr></table></figure></li><li><p>添加默认约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br></pre></td></tr></table></figure></li><li><p>添加主键</p><p>① 列级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br></pre></td></tr></table></figure><p>@ 表级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo ADD PRIMARY KEY(id);</span><br></pre></td></tr></table></figure></li><li><p>添加唯一</p><p>① 列级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;</span><br></pre></td></tr></table></figure><p>② 表级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo ADD UNIQUE(seat);</span><br></pre></td></tr></table></figure></li><li><p>添加外键</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo </span><br><span class="line">ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); </span><br></pre></td></tr></table></figure></li></ol><h3 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h3><ol><li><p>删除非空约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br></pre></td></tr></table></figure></li><li><p>删除默认约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT;</span><br></pre></td></tr></table></figure></li><li><p>删除主键</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure></li><li><p>删除唯一</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP INDEX seat;</span><br></pre></td></tr></table></figure></li><li><p>删除外键</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</span><br></pre></td></tr></table></figure></li></ol><h3 id="自增长列"><a href="#自增长列" class="headerlink" title="自增长列"></a>自增长列</h3><p>不用手动插入值，可以自动提供序列值，默认从1开始，步长为1</p><p><code>auto_increment_increment</code></p><p>如果要更改起始值：手动插入值</p><p>如果要更改步长：更改系统变量：<code>set auto_increment_increment=值;</code></p><ol><li>一个表至多有一个自增长列</li><li>自增长列只能支持数值型</li><li>自增长列必须为一个key</li></ol><h4 id="创建表时设置自增长列"><a href="#创建表时设置自增长列" class="headerlink" title="创建表时设置自增长列"></a>创建表时设置自增长列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table 表(</span><br><span class="line">    字段名 字段类型 约束 auto_increment</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="修改表时设置自增长列"><a href="#修改表时设置自增长列" class="headerlink" title="修改表时设置自增长列"></a>修改表时设置自增长列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表 modify column 字段名 字段类型 约束 auto_increment</span><br></pre></td></tr></table></figure><h4 id="删除自增长列"><a href="#删除自增长列" class="headerlink" title="删除自增长列"></a>删除自增长列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表 modify column 字段名 字段类型 约束 </span><br></pre></td></tr></table></figure><h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>TCL：<code>Transaction Control Language</code> 事务控制语言</p><p>事务由单独单元的一个或多个SQL语句组成，在这个单元中，每个MySQL语句是相互依赖的。而整个单独单元作为一个不可分割的整体，如果单元中某条SQL语句一旦执行失败或产生错误，整个单元将会回滚。所有受到影响的数据将返回到事物开始以前的状态；如果单元中的所有SQL语句均执行成功，则事物被顺利执行。</p><p>一个或一组sql语句组成一个执行单元，这个执行单元要么<strong>全部执行</strong>，要么<strong>全部不执行</strong>。</p><ul><li>概念：在mysql中的数据用各种不同的技术存储在文件（或内存）中。</li><li>通过show engines；来查看mysql支持的存储引擎。</li><li>在mysql中用的最多的存储引擎有：innodb，myisam ,memory 等。其中<code>innodb</code>支持事务，而myisam、memory等不支持</li></ul><h2 id="转账案例"><a href="#转账案例" class="headerlink" title="转账案例"></a>转账案例</h2><p>张三丰转给郭襄500元</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 张三丰  1000</span><br><span class="line"># 郭襄    1000</span><br><span class="line"></span><br><span class="line">update 表 set 张三丰的余额&#x3D;张三丰的余额-500 where name&#x3D;&#39;张三丰&#39;</span><br><span class="line"></span><br><span class="line">#　中间发生意外，张三丰的余额少了500，而郭襄的余额并没有增加</span><br><span class="line"></span><br><span class="line">update 表 set 郭襄的余额&#x3D;郭襄的余额+500 where name&#x3D;&#39;郭襄&#39;</span><br></pre></td></tr></table></figure><h2 id="事物的特性-ACID"><a href="#事物的特性-ACID" class="headerlink" title="事物的特性( ACID )"></a>事物的特性( ACID )</h2><ol><li><p><strong>原子性</strong>（Atomicity）</p><p>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</p></li><li><p><strong>一致性</strong>（Consistency）</p><p>事务必须使数据库从一个一致性状态变换到另外一个一致性状态。</p></li><li><p><strong>隔离性</strong>（Isolation）</p><p>事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p></li><li><p><strong>持久性</strong>（Durability）</p><p>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</p></li></ol><h2 id="事务的创建"><a href="#事务的创建" class="headerlink" title="事务的创建"></a>事务的创建</h2><h3 id="隐式事务"><a href="#隐式事务" class="headerlink" title="隐式事务"></a>隐式事务</h3><p>事务没有明显的开启和结束的标记，比如insert、update、delete语句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 执行完表中id列为1的那一行数据就直接被删除了</span><br><span class="line">delete from 表 where id &#x3D;1;</span><br></pre></td></tr></table></figure><h3 id="显式事务"><a href="#显式事务" class="headerlink" title="显式事务"></a>显式事务</h3><p>事务具有明显的开启和结束的标记</p><p><strong>前提</strong>：必须先设置自动提交功能为禁用 <code>set autocommit=0;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看自动提交是否开启</span><br><span class="line">SHOW VARIABLES LIKE &#39;autocommit&#39;;</span><br><span class="line"></span><br><span class="line"># 查看数据库引擎</span><br><span class="line">SHOW ENGINES;</span><br></pre></td></tr></table></figure><h3 id="开启事务步骤"><a href="#开启事务步骤" class="headerlink" title="开启事务步骤"></a>开启事务步骤</h3><ol><li><p>开启事务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 关闭自动提交</span><br><span class="line">set autocommit&#x3D;0;</span><br><span class="line"></span><br><span class="line">#　开启事物（可选）</span><br><span class="line">start transaction;</span><br></pre></td></tr></table></figure></li><li><p>编写事务中的sql语句（select insert update delete）</p></li><li><p>可选：<code>savepoint 节点名</code>；设置回滚点</p></li><li><p>结束事务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">commit;提交事务</span><br><span class="line"># 或者</span><br><span class="line">rollback;回滚事务</span><br><span class="line"># 或者</span><br><span class="line">rollback to 回滚点名;回滚到指定的地方</span><br></pre></td></tr></table></figure></li></ol><h2 id="并发事务"><a href="#并发事务" class="headerlink" title="并发事务"></a>并发事务</h2><ol><li><p>事务的并发问题是如何发生的？</p><p>多个事务 同时 操作 同一个数据库的相同数据时</p></li><li><p>并发问题都有哪些？</p><p><strong>脏读:</strong> 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还没有被提交的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的</p><p><strong>不可重复读:</strong> 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 更新了该字段. 之后, T1再次读取同一个字段, 值就不同了(在一个事物中不管读多少次，读取的数据应该都一样)</p><p><strong>幻读:</strong> 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中插入了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行</p></li><li><p>如何解决并发问题</p><p>通过设置隔离级别来解决并发问题</p></li></ol><h2 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h2><p>√：已解决 ×：未解决</p><table><thead><tr><th align="center">隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="center">read uncommitted:读未提交</td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr><tr><td align="center">read committed：读已提交</td><td align="center">√</td><td align="center">×</td><td align="center">×</td></tr><tr><td align="center">repeatable read：可重复读</td><td align="center">√</td><td align="center">√</td><td align="center">×</td></tr><tr><td align="center">serializable：串行化</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr></tbody></table><p><code>mysql</code>中默认 第三个隔离级别 <code>repeatable read</code></p><p><code>oracle</code>中默认第二个隔离级别 <code>read committed</code></p><p><strong>查看隔离级别</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br></pre></td></tr></table></figure><p><strong>设置隔离级别</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 设置当前 mySQL 连接的隔离级别: </span><br><span class="line">set transaction isolation level read committed;</span><br><span class="line"></span><br><span class="line"># 设置数据库系统的全局的隔离级别:</span><br><span class="line">set global transaction isolation level read committed;</span><br></pre></td></tr></table></figure><h2 id="案例-9"><a href="#案例-9" class="headerlink" title="案例"></a>案例</h2><ol><li><p>事务的使用步骤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 开启事务</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"># 编写一组事务的语句</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;张无忌&#39;;</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;赵敏&#39;;</span><br><span class="line"></span><br><span class="line"># 结束事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"># COMMIT;</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure></li><li><p>事务对于DELETE和TRUNCATE处理的区别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">DELETE FROM account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><p>TRUNCATE 无法回滚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">TRUNCATE TABLE account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure></li><li><p>savepoint 的使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id&#x3D;25;</span><br><span class="line">SAVEPOINT a;#设置保存点</span><br><span class="line">DELETE FROM account WHERE id&#x3D;28;</span><br><span class="line">ROLLBACK TO a;#回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure></li></ol><h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><p>MySQL从5.0.1版本开始提供视图功能。一种虚拟存在的表，行和列的数据来自定义视图的查询中 使用的表，并且是在使用视图时动态生成的，只保存了sql逻辑，不保存查询结果</p><h2 id="应用场景-2"><a href="#应用场景-2" class="headerlink" title="应用场景"></a>应用场景</h2><ul><li>多个地方用到同样的查询结果</li><li>该查询结果使用的sql语句较复杂</li></ul><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ol><li>简化sql语句</li><li>提高了sql的重用性</li><li>保护基表的数据，提高了安全性</li></ol><h2 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create view 视图名</span><br><span class="line">as</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><ol><li><p>创建视图emp_v1,要求查询电话号码以‘011’开头的员工姓名和工资、邮箱</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW emp_v1 AS SELECT</span><br><span class="line">    last_name,</span><br><span class="line">    salary,</span><br><span class="line">    email </span><br><span class="line">FROM</span><br><span class="line">    employees </span><br><span class="line">WHERE</span><br><span class="line">    phone_number LIKE &#39;011%&#39;;</span><br></pre></td></tr></table></figure></li><li><p>创建视图emp_v2，要求查询部门的最高工资高于12000的部门信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图，查询每个部门的最高工资,筛选出高于12000的</span><br><span class="line">DROP VIEW emp_v2;</span><br><span class="line">CREATE VIEW emp_v2 AS SELECT</span><br><span class="line">department_id,</span><br><span class="line">MAX( salary ) max_salary </span><br><span class="line">FROM</span><br><span class="line">    employees </span><br><span class="line">GROUP BY</span><br><span class="line">    department_id </span><br><span class="line">HAVING</span><br><span class="line">    max_salary &gt; 12000;</span><br><span class="line"></span><br><span class="line"># 根据创建的视图连接departments表查询部门信息</span><br><span class="line">SELECT</span><br><span class="line">    d.*,</span><br><span class="line">    ev2.max_salary </span><br><span class="line">FROM</span><br><span class="line">    departments d</span><br><span class="line">    JOIN emp_v2 ev2 </span><br><span class="line">    ON d.department_id &#x3D; ev2.department_id;</span><br></pre></td></tr></table></figure></li><li><p>查询姓名中包含a字符的员工名、部门名和工种信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工名、部门名和工种信息</span><br><span class="line">CREATE VIEW emp_v3 AS SELECT</span><br><span class="line">e.last_name,</span><br><span class="line">d.department_name,</span><br><span class="line">j.job_title </span><br><span class="line">FROM</span><br><span class="line">    employees e</span><br><span class="line">    LEFT JOIN departments d ON e.department_id &#x3D; d.department_id</span><br><span class="line">    LEFT JOIN jobs j ON e.job_id &#x3D; j.job_id;</span><br><span class="line"></span><br><span class="line"># 筛选出姓名中包含a字符的员工</span><br><span class="line">SELECT * FROM emp_v3 WHERE last_name LIKE &#39;%a%&#39;;</span><br></pre></td></tr></table></figure></li><li><p>查询各部门的平均工资级别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 查询各部门的平均工资</span><br><span class="line">CREATE VIEW emp_v4 AS SELECT</span><br><span class="line">AVG( salary ) avg_salary,</span><br><span class="line">department_id </span><br><span class="line">FROM</span><br><span class="line">    employees </span><br><span class="line">GROUP BY</span><br><span class="line">    department_id;</span><br><span class="line"></span><br><span class="line"># 查询各部门的平均工资级别</span><br><span class="line">SELECT</span><br><span class="line">    department_id,</span><br><span class="line">    j.grade_level </span><br><span class="line">FROM</span><br><span class="line">    emp_v4 ev4</span><br><span class="line">    LEFT JOIN job_grades j </span><br><span class="line">    ON ev4.avg_salary BETWEEN j.lowest_sal </span><br><span class="line">    AND j.highest_sal</span><br></pre></td></tr></table></figure></li><li><p>查询平均工资最低的部门信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    d.*,</span><br><span class="line">    ev4.avg_salary </span><br><span class="line">FROM</span><br><span class="line">    departments d</span><br><span class="line">    JOIN ( SELECT * FROM emp_v4 ORDER BY avg_salary LIMIT 1 ) ev4 </span><br><span class="line">    ON d.department_id &#x3D; ev4.department_id</span><br></pre></td></tr></table></figure></li></ol><h2 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h2><p>方式一：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create or replace view  视图名</span><br><span class="line">as</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><p>方式二：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter view 视图名</span><br><span class="line">as </span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><h2 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view 视图名,视图名,...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW emp_v1,emp_v2,emp_v3,emp_v4;</span><br></pre></td></tr></table></figure><h2 id="查看视图"><a href="#查看视图" class="headerlink" title="查看视图"></a>查看视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DESC 视图名;</span><br><span class="line"></span><br><span class="line">SHOW CREATE VIEW 视图名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW emp_v1 AS SELECT</span><br><span class="line">* </span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line">DESC emp_v1;</span><br><span class="line"></span><br><span class="line">SHOW CREATE VIEW emp_v1;</span><br></pre></td></tr></table></figure><h2 id="视图的更新"><a href="#视图的更新" class="headerlink" title="视图的更新"></a>视图的更新</h2><p>视图的可更新性和视图中查询的定义有关系，以下类型的视图是不能更新的。</p><ul><li>包含以下关键字的sql语句：分组函数、distinct、group by</li><li>having、union或者union all</li><li>常量视图</li><li>Select中包含子查询</li><li>join</li><li>from一个不能更新的视图</li><li>where子句的子查询引用了from子句中的表</li></ul><h3 id="案例-10"><a href="#案例-10" class="headerlink" title="案例"></a>案例</h3><ol><li><p>张飞能否成功插入？</p><p>不能，原表中没有annual salary那一列</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图，查询员工的姓名，邮箱和年薪</span><br><span class="line"></span><br><span class="line">CREATE </span><br><span class="line">    OR REPLACE VIEW myv1 AS SELECT</span><br><span class="line">    last_name,</span><br><span class="line">    email,</span><br><span class="line">    salary * 12 *(1+IFNULL ( commission_pct, 0 )) &quot;annual salary&quot; </span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line"># 插入一条数据</span><br><span class="line">INSERT INTO myv1 VALUES(&#39;张飞&#39;,&#39;zf@qq.com&#39;,94862.00);</span><br></pre></td></tr></table></figure></li><li><p>张飞能否成功插入？</p><p>能，并且原表中也存在</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图，查询员工的姓名和邮箱</span><br><span class="line"></span><br><span class="line">CREATE </span><br><span class="line">    OR REPLACE VIEW myv1 AS SELECT</span><br><span class="line">    last_name,</span><br><span class="line">    email</span><br><span class="line">FROM</span><br><span class="line">    employees;</span><br><span class="line"></span><br><span class="line"># 插入一条数据</span><br><span class="line">INSERT INTO myv1 VALUES(&#39;张飞&#39;,&#39;zf@qq.com&#39;);</span><br></pre></td></tr></table></figure></li><li><p>能否将张飞修改为张无忌？</p><p>能</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE myv1 SET last_name &#x3D; &#39;张无忌&#39; WHERE last_name&#x3D;&#39;张飞&#39;;</span><br></pre></td></tr></table></figure></li><li><p>能否干掉张无忌？</p><p>能</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM myv1 WHERE last_name &#x3D; &#39;张无忌&#39;;</span><br></pre></td></tr></table></figure></li><li><p>能否将10号部门的最高薪水改为9000？</p><p>不能 ，包含group by和分组函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#　创建视图，查询每个部门的最高工资</span><br><span class="line">CREATE </span><br><span class="line">    OR REPLACE VIEW myv1 AS SELECT</span><br><span class="line">    MAX( salary ) m,</span><br><span class="line">    department_id </span><br><span class="line">FROM</span><br><span class="line">    employees </span><br><span class="line">GROUP BY</span><br><span class="line">    department_id;</span><br><span class="line"></span><br><span class="line">＃ 将10号部门的最高薪水改为9000</span><br><span class="line">UPDATE myv1 SET m&#x3D;9000 WHERE department_id&#x3D;10;</span><br></pre></td></tr></table></figure></li><li><p>能否更改？</p><p>不能，常量视图</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv2</span><br><span class="line">AS</span><br><span class="line">SELECT &#39;john&#39; NAME;</span><br><span class="line"></span><br><span class="line">#更新</span><br><span class="line">UPDATE myv2 SET NAME&#x3D;&#39;lucy&#39;;</span><br></pre></td></tr></table></figure></li><li><p>能够将最高工资列修改为100000？</p><p>不能，select中包含子查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv3 AS </span><br><span class="line">SELECT department_id,( SELECT MAX( salary ) FROM employees ) 最高工资 </span><br><span class="line">FROM</span><br><span class="line">    departments;</span><br><span class="line"></span><br><span class="line"># 修改</span><br><span class="line"></span><br><span class="line">UPDATE myv3 SET 最高工资&#x3D;100000;</span><br></pre></td></tr></table></figure></li><li><p>修改和插入能成功吗？</p><p>可以更新，但是不能插入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图，查询员工名与部门名</span><br><span class="line">CREATE </span><br><span class="line">    OR REPLACE VIEW myv4 AS SELECT</span><br><span class="line">    last_name,</span><br><span class="line">    department_name </span><br><span class="line">FROM</span><br><span class="line">    employees e</span><br><span class="line">    JOIN departments d ON e.department_id &#x3D; d.department_id;</span><br><span class="line"></span><br><span class="line"># 修改</span><br><span class="line">UPDATE myv4 SET last_name  &#x3D; &#39;张飞&#39; WHERE last_name&#x3D;&#39;Whalen&#39;;</span><br><span class="line"># 插入</span><br><span class="line">INSERT INTO myv4 VALUES(&#39;陈真&#39;,&#39;Acc&#39;);</span><br></pre></td></tr></table></figure></li><li><p>能修改吗？</p><p>不能，from一个不能更新的视图，myv3中select使用了子查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE </span><br><span class="line">    OR REPLACE VIEW myv5 AS SELECT</span><br><span class="line">    * </span><br><span class="line">FROM</span><br><span class="line">    myv3;</span><br><span class="line"></span><br><span class="line"># 修改</span><br><span class="line">UPDATE myv5 SET 最高工资&#x3D;10000 WHERE department_id&#x3D;60;</span><br></pre></td></tr></table></figure></li><li><p>能修改吗？</p><p>不能，where子句的子查询引用了from子句中的表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有的领导信息</span><br><span class="line">CREATE OR REPLACE VIEW myv6</span><br><span class="line">AS</span><br><span class="line"></span><br><span class="line">SELECT last_name,email,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id IN(</span><br><span class="line">    SELECT  manager_id</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE manager_id IS NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 修改</span><br><span class="line">UPDATE myv6 SET salary&#x3D;10000 WHERE last_name &#x3D; &#39;k_ing&#39;;</span><br></pre></td></tr></table></figure><p>查询领导Id（将所有员工的上级Id查出来，这些Id就是领导Id）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT manager_id FROM employees WHERE manager_id IS NOT NULL</span><br></pre></td></tr></table></figure></li></ol><h2 id="视图和表的对比"><a href="#视图和表的对比" class="headerlink" title="视图和表的对比"></a>视图和表的对比</h2><table><thead><tr><th align="center"></th><th align="center">关键字</th><th align="center">是否占用物理空间</th><th align="center">使用</th></tr></thead><tbody><tr><td align="center">视图</td><td align="center">create view</td><td align="center">占用较小，只保存sql逻辑</td><td align="center">一般用于查询</td></tr><tr><td align="center">表</td><td align="center">create table</td><td align="center">保存实际的数据</td><td align="center">增删改查</td></tr></tbody></table><h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h2><p>系统变量：</p><ul><li>全局变量</li><li>会话变量</li></ul><p>说明：变量由系统定义，不是用户定义，属于服务器层面</p><p>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别<br>​ 全局变量作用域：服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话（连接）有效，但不能跨重启（重启之后会恢复到你修改前的状态，修改要永久生效，需要修改配置文件）</p><ol><li><p>查看所有系统变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 全局</span><br><span class="line">show global variables;</span><br><span class="line"></span><br><span class="line">#会话</span><br><span class="line">show [session] variables;</span><br></pre></td></tr></table></figure></li><li><p>查看满足条件的部分系统变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global | [session] variables like &#39;%char%&#39;;</span><br></pre></td></tr></table></figure></li><li><p>查看指定的系统变量的值（<code>带.</code>）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global |【@@session】.系统变量名;</span><br></pre></td></tr></table></figure></li><li><p>为某个系统变量赋值</p><p>方式一：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global|[session]系统变量名&#x3D;值;</span><br></pre></td></tr></table></figure><p>方式二（<code>带.</code>）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@global|【@@session】.系统变量名&#x3D;值;</span><br></pre></td></tr></table></figure></li></ol><p><strong>例如：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES;</span><br><span class="line"># 查看满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line"># 查看指定的系统变量的值</span><br><span class="line">SELECT @@global.autocommit;</span><br><span class="line"># 为某个系统变量赋值</span><br><span class="line">SET @@global.autocommit&#x3D;0;</span><br><span class="line">SET GLOBAL autocommit&#x3D;0;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有会话变量</span><br><span class="line">SHOW SESSION VARIABLES;</span><br><span class="line"># 查看满足条件的部分会话变量</span><br><span class="line">SHOW SESSION VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line"># 查看指定的会话变量的值</span><br><span class="line">SELECT @@autocommit;</span><br><span class="line">SELECT @@session.tx_isolation;</span><br><span class="line"># 为某个会话变量赋值</span><br><span class="line">SET @@session.tx_isolation&#x3D;&#39;read-uncommitted&#39;;</span><br><span class="line">SET SESSION tx_isolation&#x3D;&#39;read-committed&#39;;</span><br></pre></td></tr></table></figure><h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><p>变量由用户自定义，而不是系统提供的</p><p>作用域：针对于当前会话（连接）有效，作用域同于会话变量</p><p><strong>声明并初始化</strong></p><p>赋值操作符：<code>=</code>或<code>:=</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET @变量名&#x3D;值;</span><br><span class="line">SET @变量名:&#x3D;值;</span><br><span class="line">SELECT @变量名:&#x3D;值;</span><br></pre></td></tr></table></figure><p><strong>更新变量的值</strong></p><ul><li><p>方式一</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET @变量名&#x3D;值;</span><br><span class="line">SET @变量名:&#x3D;值;</span><br><span class="line">SELECT @变量名:&#x3D;值;</span><br></pre></td></tr></table></figure></li><li><p>方式二</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 将某个字段的值赋给 自定义变量</span><br><span class="line">SELECT 字段 INTO @变量名</span><br><span class="line">FROM 表;</span><br></pre></td></tr></table></figure></li></ul><p><strong>查看变量的值</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @变量名;</span><br></pre></td></tr></table></figure><h2 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h2><p>作用域：仅仅在定义它的begin end块中有效</p><p>应在 begin end中的第一句话声明</p><p><strong>声明</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">    变量名 类型;</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"># 值的类型要和前面声明的类型一致</span><br><span class="line">DECLARE </span><br><span class="line">    变量名 类型 【DEFAULT 值】;</span><br><span class="line">    ...</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p><strong>赋值（更新变量的值）</strong></p><ul><li><p>方式一</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET 局部变量名&#x3D;值;</span><br><span class="line">SET 局部变量名:&#x3D;值;</span><br><span class="line">SELECT 局部变量名:&#x3D;值;</span><br></pre></td></tr></table></figure></li><li><p>方式二</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段 INTO 具备变量名</span><br><span class="line">FROM 表;</span><br></pre></td></tr></table></figure></li></ul><p><strong>查看变量的值</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 局部变量名;</span><br></pre></td></tr></table></figure><p><strong>用户变量和局部变量的区别</strong></p><table><thead><tr><th align="center">变量</th><th align="center">作用域</th><th align="center">定义和使用的位置</th><th align="center">语法</th></tr></thead><tbody><tr><td align="center">自定义变量</td><td align="center">当前会话</td><td align="center">会话中的任何地方</td><td align="center">必须加@符号，不用限定类型</td></tr><tr><td align="center">局部变量</td><td align="center">BEGIN END中</td><td align="center">只能在BEGIN END中，且为第一句话</td><td align="center">一般不用加@符号，需要限定类型</td></tr></tbody></table><h2 id="案例-11"><a href="#案例-11" class="headerlink" title="案例"></a>案例</h2><ol><li><p>声明两个用户（自定义）变量，求和并打印</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET @m&#x3D;1;</span><br><span class="line">SET @n&#x3D;1;</span><br><span class="line">SET @sum&#x3D;@m+@n;</span><br><span class="line">SELECT @sum;</span><br></pre></td></tr></table></figure></li></ol><h1 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h1><p><strong>什么是存储过程：</strong></p><p>事先经过编译并存储在数据库中的一段sql语句的集合。</p><p>类似于java中的方法</p><p><strong>使用好处</strong></p><ol><li>简化应用开发人员的很多工作</li><li>减少数据在数据库和应用服务器之间的传输</li><li>提高了数据处理的效率</li><li>一组预先编译好的SQL语句的集合，理解成批处理语句</li></ol><h2 id="创建语法"><a href="#创建语法" class="headerlink" title="创建语法"></a>创建语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE 存储过程名(参数列表)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    存储过程体（一组合法的SQL语句）</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p><strong>参数列表包含三部分</strong></p><ul><li>参数模式</li><li>参数名</li><li>参数类型</li></ul><p>例：in stuname varchar(20)</p><p><strong>参数模式：</strong></p><p><code>in</code>：该参数可以作为输入，也就是该参数需要调用方传入值</p><p><code>out</code>：该参数可以作为输出，也就是该参数可以作为返回值</p><p><code>inout</code>：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p><ul><li><p>如果存储过程体仅仅只有一句话，begin end可以省略</p></li><li><p>存储过程体中的每条sql语句的结尾要求必须加分号。</p></li><li><p>存储过程的结尾可以使用 delimiter 重新设置（避免与存储过程体的分号混淆）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delimiter 结束标记</span><br><span class="line"># 例</span><br><span class="line">delimiter $</span><br></pre></td></tr></table></figure></li></ul><p><strong>例：</strong></p><p>插入到admin表中五条记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">USE girls;</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp1()</span><br><span class="line">BEGIN</span><br><span class="line">    INSERT INTO admin(username,&#96;password&#96;) </span><br><span class="line">    VALUES</span><br><span class="line">    (&#39;john1&#39;,&#39;0000&#39;),(&#39;lily&#39;,&#39;0000&#39;),(&#39;rose&#39;,&#39;0000&#39;),(&#39;jack&#39;,&#39;0000&#39;),(&#39;tom&#39;,&#39;0000&#39;);</span><br><span class="line">END $</span><br></pre></td></tr></table></figure><h2 id="调用语法"><a href="#调用语法" class="headerlink" title="调用语法"></a>调用语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CALL 存储过程名(实参列表);</span><br><span class="line"></span><br><span class="line">CALL myp1();</span><br><span class="line"># 存储过程定义完结束标记$，那么此处的结束标记不用&#96;;&#96;，使用$</span><br><span class="line">CALL myp1()$</span><br></pre></td></tr></table></figure><h2 id="创建带in模式参数的-存储过程"><a href="#创建带in模式参数的-存储过程" class="headerlink" title="创建带in模式参数的 存储过程"></a>创建带in模式参数的 存储过程</h2><p>创建存储过程实现 根据女神名，查询对应的男神信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT bo.*</span><br><span class="line">    FROM boys bo</span><br><span class="line">    RIGHT JOIN beauty b ON bo.id &#x3D; b.boyfriend_id</span><br><span class="line">    WHERE b.name&#x3D;beautyName;</span><br><span class="line">END $</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL myp2(&#39;赵敏&#39;);</span><br></pre></td></tr></table></figure><p>创建存储过程实现，判断用户是否登录成功</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp3(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE result INT DEFAULT 0;    #声明并初始化</span><br><span class="line"></span><br><span class="line">    SELECT COUNT(*) INTO result    #赋值</span><br><span class="line">    FROM admin</span><br><span class="line">    WHERE admin.username &#x3D; username</span><br><span class="line">    AND admin.password &#x3D; PASSWORD;</span><br><span class="line"></span><br><span class="line">    SELECT IF(result&gt;0,&#39;成功&#39;,&#39;失败&#39;);    #使用</span><br><span class="line">END $</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CALL myp3(&#39;john&#39;,&#39;8888&#39;);</span><br><span class="line">CALL myp3(&#39;john&#39;,&#39;1234&#39;);</span><br></pre></td></tr></table></figure><h2 id="创建out模式参数的存储过程"><a href="#创建out模式参数的存储过程" class="headerlink" title="创建out模式参数的存储过程"></a>创建out模式参数的存储过程</h2><p>根据输入的女神名，返回对应的男神名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp4(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT bo.boyname INTO boyname</span><br><span class="line">    FROM boys bo</span><br><span class="line">    RIGHT JOIN</span><br><span class="line">    beauty b ON b.boyfriend_id &#x3D; bo.id</span><br><span class="line">    WHERE b.name&#x3D;beautyName ;</span><br><span class="line">END $</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 调用 使用自定义变量接收</span><br><span class="line">CALL myp4(&#39;赵敏&#39;,@name);</span><br><span class="line">SELECT @name;</span><br></pre></td></tr></table></figure><p>根据输入的女神名，返回对应的男神名和魅力值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp5(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20),OUT usercp INT) </span><br><span class="line">BEGIN</span><br><span class="line">    SELECT boys.boyname ,boys.usercp INTO boyname,usercp</span><br><span class="line">    FROM boys </span><br><span class="line">    RIGHT JOIN</span><br><span class="line">    beauty b ON b.boyfriend_id &#x3D; boys.id</span><br><span class="line">    WHERE b.name&#x3D;beautyName ;</span><br><span class="line"></span><br><span class="line">END $</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CALL myp5(&#39;小昭&#39;,@name,@cp);</span><br><span class="line">SELECT @name,@cp;</span><br></pre></td></tr></table></figure><h2 id="创建带inout模式参数的存储过程"><a href="#创建带inout模式参数的存储过程" class="headerlink" title="创建带inout模式参数的存储过程"></a>创建带inout模式参数的存储过程</h2><p>传入a和b两个值，最终a和b都翻倍并返回</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE OR REPLACE PROCEDURE myp5(INOUT a INT,INOUT b INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    SET a:&#x3D;a*2;</span><br><span class="line">    SET b:&#x3D;b*2;</span><br><span class="line"></span><br><span class="line">END $</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET @m&#x3D;10;</span><br><span class="line">SET @n&#x3D;20;</span><br><span class="line">CALL myp5(@m,@n);</span><br><span class="line">SELECT @m,@n;</span><br></pre></td></tr></table></figure><h2 id="存储过程的删除"><a href="#存储过程的删除" class="headerlink" title="存储过程的删除"></a>存储过程的删除</h2><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 存储过程一次只能删除一个</span><br><span class="line">DROP PROCEDURE 存储过程名;</span><br></pre></td></tr></table></figure><h2 id="查看存储过程的信息"><a href="#查看存储过程的信息" class="headerlink" title="查看存储过程的信息"></a>查看存储过程的信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE myp5;</span><br></pre></td></tr></table></figure><h1 id="存储函数"><a href="#存储函数" class="headerlink" title="存储函数"></a>存储函数</h1><h2 id="存储过程与存储函数的区别"><a href="#存储过程与存储函数的区别" class="headerlink" title="存储过程与存储函数的区别"></a>存储过程与存储函数的区别</h2><p>存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新</p><p>存储函数：有且仅有1 个返回，适合做处理数据后返回一个结果</p><h2 id="创建语法-1"><a href="#创建语法-1" class="headerlink" title="创建语法"></a>创建语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION 函数名(参数列表) RETURNS 返回类型</span><br><span class="line">BEGIN</span><br><span class="line">    函数体</span><br><span class="line">END</span><br></pre></td></tr></table></figure><ul><li>参数列表 包含两部分：参数名，参数类型</li><li>函数体：<ul><li>肯定会有return语句，如果没有会报错 如果return语句没有放在函数体的最后也不报错，但不建议</li><li>函数体中仅有一句话，则可以省略begin end</li></ul></li><li>使用 delimiter语句设置结束标记</li></ul><h2 id="调用语法-1"><a href="#调用语法-1" class="headerlink" title="调用语法"></a>调用语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 函数名(参数列表);</span><br></pre></td></tr></table></figure><h2 id="无参有返回"><a href="#无参有返回" class="headerlink" title="无参有返回"></a>无参有返回</h2><p>返回公司的员工个数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE FUNCTION myf1() RETURNS INT</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    DECLARE c INT DEFAULT 0;    #定义局部变量</span><br><span class="line">    SELECT COUNT(*) INTO c     #赋值</span><br><span class="line">    FROM employees;</span><br><span class="line">    RETURN c;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT myf1();</span><br></pre></td></tr></table></figure><h2 id="有参有返回"><a href="#有参有返回" class="headerlink" title="有参有返回"></a>有参有返回</h2><p>根据员工名，返回它的工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE FUNCTION myf2(empName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">    SET @sal&#x3D;0;    #定义用户变量 </span><br><span class="line">    SELECT salary INTO @sal    #赋值</span><br><span class="line">    FROM employees</span><br><span class="line">    WHERE last_name &#x3D; empName;</span><br><span class="line"></span><br><span class="line">    RETURN @sal;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT myf2(&#39;Kochhar&#39;);</span><br><span class="line"></span><br><span class="line">SELECT @sal;</span><br></pre></td></tr></table></figure><p>根据部门名，返回该部门的平均工资</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE sal DOUBLE ;</span><br><span class="line">    SELECT AVG(salary) INTO sal</span><br><span class="line">    FROM employees e</span><br><span class="line">    JOIN departments d ON e.department_id &#x3D; d.department_id</span><br><span class="line">    WHERE d.department_name&#x3D;deptName;</span><br><span class="line">    RETURN sal;</span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT myf3(&#39;IT&#39;);</span><br></pre></td></tr></table></figure><h2 id="查看函数"><a href="#查看函数" class="headerlink" title="查看函数"></a>查看函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION myf3;</span><br></pre></td></tr></table></figure><h2 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION myf3;</span><br></pre></td></tr></table></figure><p>创建函数，实现传入两个float，返回二者之和</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE FUNCTION myf3(num1 FLOAT,num2 FLOAT) RETURNS FLOAT(3,1)</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE SUM FLOAT(3,1) DEFAULT 0;</span><br><span class="line">    SET SUM&#x3D;num1+num2;</span><br><span class="line">    RETURN SUM;</span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT myf3(15.5,15.3);    --&gt; 30.8</span><br></pre></td></tr></table></figure><h1 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h1><h2 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h2><h3 id="if函数"><a href="#if函数" class="headerlink" title="if函数"></a>if函数</h3><p><strong>语法</strong>：<code>if(条件,值1，值2)</code></p><p><strong>功能</strong>：实现双分支</p><p>应用在begin end中或外面</p><h3 id="case结构"><a href="#case结构" class="headerlink" title="case结构"></a>case结构</h3><p>类似java中的switch</p><p><strong>功能</strong>：实现多分支</p><p>应用在begin end 中或外面</p><p><strong>语法一</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case 表达式或字段</span><br><span class="line">when 值1 then 语句1;</span><br><span class="line">when 值2 then 语句2；</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line">end [case];</span><br></pre></td></tr></table></figure><p><strong>语法二</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case </span><br><span class="line">when 条件1 then 语句1;</span><br><span class="line">when 条件2 then 语句2；</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line">end [case];</span><br></pre></td></tr></table></figure><p>创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE FUNCTION test_case(score DOUBLE) RETURNS CHAR</span><br><span class="line">BEGIN</span><br><span class="line">-- DECLARE result CHAR;</span><br><span class="line">CASE  </span><br><span class="line">    WHEN score&gt;90 THEN</span><br><span class="line">        RETURN &#39;A&#39;;</span><br><span class="line">    WHEN score&gt;80 THEN </span><br><span class="line">        RETURN &#39;B&#39;;</span><br><span class="line">    WHEN score&gt;60 THEN</span><br><span class="line">        RETURN &#39;C&#39;;</span><br><span class="line">    ELSE</span><br><span class="line">        RETURN &#39;D&#39;;</span><br><span class="line">END CASE;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT test_case(95);</span><br><span class="line"></span><br><span class="line">SELECT test_case(85);</span><br><span class="line"></span><br><span class="line">SELECT test_case(75);</span><br><span class="line"></span><br><span class="line">SELECT test_case(55);</span><br></pre></td></tr></table></figure><h3 id="if结构"><a href="#if结构" class="headerlink" title="if结构"></a>if结构</h3><p><strong>功能</strong>：实现多分支</p><p>只能放在begin end中</p><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 条件1 then 语句1;</span><br><span class="line">elseif 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">else 语句n;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure><p>创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE FUNCTION test_if(score DOUBLE) RETURNS CHAR </span><br><span class="line">BEGIN </span><br><span class="line">    DECLARE result CHAR;</span><br><span class="line">    IF score&gt;90 THEN</span><br><span class="line">        SET result:&#x3D;&#39;A&#39;;</span><br><span class="line">    ELSEIF score&gt;80 THEN</span><br><span class="line">        SET result:&#x3D;&#39;B&#39;;</span><br><span class="line">    ELSEIF score&gt;60 THEN</span><br><span class="line">        SET result:&#x3D;&#39;C&#39;;</span><br><span class="line">    ELSE</span><br><span class="line">        SET result:&#x3D;&#39;D&#39;;</span><br><span class="line">    END IF;</span><br><span class="line">    RETURN result;</span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT test_if(95);</span><br><span class="line"></span><br><span class="line">SELECT test_if(85);</span><br><span class="line"></span><br><span class="line">SELECT test_if(75);</span><br><span class="line"></span><br><span class="line">SELECT test_if(55);</span><br></pre></td></tr></table></figure><p>创建存储过程，如果工资&lt;2000,则删除，如果5000&gt;工资&gt;2000,则涨工资1000，否则涨工资500</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE PROCEDURE test_if2(IN salary DOUBLE)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    IF salary&lt;2000 THEN</span><br><span class="line">            DELETE FROM employees WHERE employees.salary&#x3D;salary;</span><br><span class="line">    ELSEIF 2000&lt;salary&lt;5000 THEN </span><br><span class="line">            UPDATE employees SET employees.salary&#x3D;employees.salary+1000 WHERE employees.salary&#x3D;salary; </span><br><span class="line">    ELSE</span><br><span class="line">            UPDATE employees SET employees.salary&#x3D;employees.salary+500 WHERE employees.salary&#x3D;salary; </span><br><span class="line">    END IF;</span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL test_if2(3300.00);</span><br></pre></td></tr></table></figure><h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><p><strong>分类</strong>：<code>while</code>、<code>loop</code>、<code>repeat</code></p><p><strong>循环控制</strong>：</p><p><code>iterate</code>类似于 <code>continue</code>，继续，结束本次循环，继续下一次</p><p><code>leave</code> 类似于 <code>break</code>，跳出，结束当前所在的循环</p><p>只能放在begin end中</p><p><strong>标签</strong>：用上循环控制就必须要加</p><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[标签:] while 循环条件 do</span><br><span class="line">    循环体;</span><br><span class="line">end while [标签];</span><br></pre></td></tr></table></figure><p>批量插入，根据次数插入到admin表中多条记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">USE girls;</span><br><span class="line"></span><br><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE PROCEDURE test_while(IN total INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">WHILE i&lt;total DO</span><br><span class="line">    INSERT INTO admin VALUES(NULL,CONCAT(&#39;员工&#39;,i),&#39;8888&#39;);</span><br><span class="line">    SET i:&#x3D;i+1;</span><br><span class="line">END WHILE;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL test_while(10);</span><br></pre></td></tr></table></figure><p>批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止 （需要加标签）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE PROCEDURE test_while(IN total INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">DECLARE i INT DEFAULT 1;</span><br><span class="line"></span><br><span class="line">a:WHILE i&lt;&#x3D;total DO</span><br><span class="line">    IF i&gt;20 THEN LEAVE a;</span><br><span class="line">    END IF;</span><br><span class="line">    INSERT INTO admin VALUES(NULL,CONCAT(&#39;员工&#39;,i),&#39;8888&#39;);</span><br><span class="line">    SET i:&#x3D;i+1;</span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE admin;</span><br><span class="line">CALL test_while(100);</span><br></pre></td></tr></table></figure><p>批量插入，根据次数插入到admin表中多条记录，只插入偶数次</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER &#x2F;&#x2F;</span><br><span class="line">CREATE OR REPLACE PROCEDURE test_while(IN total INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">a:WHILE i&lt;&#x3D;total DO</span><br><span class="line">    SET i:&#x3D;i+1;</span><br><span class="line">    IF MOD(i,2)!&#x3D;0 THEN ITERATE a;</span><br><span class="line">    END IF;</span><br><span class="line">    INSERT INTO admin VALUES(NULL,CONCAT(&#39;员工&#39;,i),&#39;8888&#39;);</span><br><span class="line"></span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE admin;</span><br><span class="line">CALL test_while(20);</span><br></pre></td></tr></table></figure><h3 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[标签:] loop</span><br><span class="line"></span><br><span class="line">    循环体;</span><br><span class="line"></span><br><span class="line">end loop [标签];</span><br></pre></td></tr></table></figure><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签] repeat</span><br><span class="line">    循环体;</span><br><span class="line">until 结束循环的条件</span><br><span class="line">end repeat [标签];</span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------------本文结束<i class="fa fa-paw"></i> 感谢您的阅读-------------------</div></div></div><div class="reward-container"><div></div> <button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="sleep 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="sleep 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> sleep</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://tiangoubot.github.io/2020/09/28/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="MySQL学习笔记">https://tiangoubot.github.io/2020/09/28/MySQL学习笔记/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/images/wechat.jpg"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/09/23/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="Git学习笔记"><i class="fa fa-chevron-left"></i> Git学习笔记</a></div><div class="post-nav-item"> <a href="/2020/09/28/JDK%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/" rel="next" title="JDK环境变量配置">JDK环境变量配置<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8CSQL%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">数据库和SQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="nav-number">1.1.</span> <span class="nav-text">数据库的好处</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">1.2.</span> <span class="nav-text">数据库的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E8%AF%AD%E8%A8%80"><span class="nav-number">1.3.</span> <span class="nav-text">SQL语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DML"><span class="nav-number">1.3.1.</span> <span class="nav-text">DML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DDL"><span class="nav-number">1.3.2.</span> <span class="nav-text">DDL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DCL"><span class="nav-number">1.3.3.</span> <span class="nav-text">DCL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DQL"><span class="nav-number">1.3.4.</span> <span class="nav-text">DQL</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">MySQL的安装与使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">2.1.</span> <span class="nav-text">MySQL的安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2MySQL%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.2.</span> <span class="nav-text">启动和停止MySQL服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA"><span class="nav-number">2.3.</span> <span class="nav-text">MySQL服务端的登录和退出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">2.4.</span> <span class="nav-text">MySQL数据库的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">2.5.</span> <span class="nav-text">基本命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BMySQL%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.5.1.</span> <span class="nav-text">查看MySQL中有哪些数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.5.2.</span> <span class="nav-text">使用一个数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8"><span class="nav-number">2.5.3.</span> <span class="nav-text">查看当前使用的数据库中的表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8"><span class="nav-number">2.5.4.</span> <span class="nav-text">查看指定数据库中的表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.5.5.</span> <span class="nav-text">新建一个数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.5.6.</span> <span class="nav-text">查看当前选择的数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="nav-number">2.5.7.</span> <span class="nav-text">创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">2.5.8.</span> <span class="nav-text">查看表结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E4%B8%AD%E6%89%80%E6%9C%89%E8%AE%B0%E5%BD%95"><span class="nav-number">2.5.9.</span> <span class="nav-text">查看表中所有记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%91%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95"><span class="nav-number">2.5.10.</span> <span class="nav-text">向表中插入记录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="nav-number">3.</span> <span class="nav-text">基本查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SELECT%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.1.</span> <span class="nav-text">SELECT语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%83%A8%E5%88%97"><span class="nav-number">3.1.1.</span> <span class="nav-text">查询全部列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E7%89%B9%E5%AE%9A%E7%9A%84%E5%88%97"><span class="nav-number">3.1.2.</span> <span class="nav-text">查询特定的列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">3.1.3.</span> <span class="nav-text">查询表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%87%BD%E6%95%B0"><span class="nav-number">3.1.4.</span> <span class="nav-text">查询函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%97%B6%E7%BB%99%E5%88%97%E5%8F%96%E5%88%AB%E5%90%8D"><span class="nav-number">3.2.</span> <span class="nav-text">查询时给列取别名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8as"><span class="nav-number">3.2.1.</span> <span class="nav-text">使用as</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A9%BA%E6%A0%BC"><span class="nav-number">3.2.2.</span> <span class="nav-text">使用空格</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%8E%BB%E9%87%8D"><span class="nav-number">3.3.</span> <span class="nav-text">查询去重</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E5%8F%B7-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">3.4.</span> <span class="nav-text">加号(+)的作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CONCAT%E5%87%BD%E6%95%B0"><span class="nav-number">3.5.</span> <span class="nav-text">CONCAT函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IFNULL%E5%87%BD%E6%95%B0"><span class="nav-number">3.6.</span> <span class="nav-text">IFNULL函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ISNULL%E5%87%BD%E6%95%B0"><span class="nav-number">3.7.</span> <span class="nav-text">ISNULL函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.</span> <span class="nav-text">条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="nav-number">4.1.</span> <span class="nav-text">按条件表达式筛选</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="nav-number">4.2.</span> <span class="nav-text">按逻辑表达式筛选</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.3.</span> <span class="nav-text">模糊查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IN"><span class="nav-number">4.4.</span> <span class="nav-text">IN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IS-NULL"><span class="nav-number">4.5.</span> <span class="nav-text">IS NULL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E7%AD%89%E4%BA%8E-lt-gt"><span class="nav-number">4.6.</span> <span class="nav-text">安全等于&lt;&#x3D;&gt;</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.</span> <span class="nav-text">排序查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E7%82%B9"><span class="nav-number">5.2.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">5.3.</span> <span class="nav-text">案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="nav-number">5.3.1.</span> <span class="nav-text">单个字段排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8E%92%E5%BA%8F"><span class="nav-number">5.3.2.</span> <span class="nav-text">按表达式排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E5%88%AB%E5%90%8D%E6%8E%92%E5%BA%8F"><span class="nav-number">5.3.3.</span> <span class="nav-text">按别名排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E5%87%BD%E6%95%B0%E6%8E%92%E5%BA%8F"><span class="nav-number">5.3.4.</span> <span class="nav-text">按函数排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="nav-number">5.3.5.</span> <span class="nav-text">多个字段排序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-number">6.</span> <span class="nav-text">单行函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="nav-number">6.1.</span> <span class="nav-text">字符函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LENGTH-s"><span class="nav-number">6.1.1.</span> <span class="nav-text">LENGTH(s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONCAT-s1-s2-%E2%80%A6-sn"><span class="nav-number">6.1.2.</span> <span class="nav-text">CONCAT(s1, s2,…, sn)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UPPER-s"><span class="nav-number">6.1.3.</span> <span class="nav-text">UPPER(s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LOWER-s"><span class="nav-number">6.1.4.</span> <span class="nav-text">LOWER(s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SUBSTR-s-start-length-%E3%80%81SUBSTRING"><span class="nav-number">6.1.5.</span> <span class="nav-text">SUBSTR(s, start, length)、SUBSTRING()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#INSTR-s-s"><span class="nav-number">6.1.6.</span> <span class="nav-text">INSTR(s, s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TRIM-s"><span class="nav-number">6.1.7.</span> <span class="nav-text">TRIM(s)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LPAD-s1-len-s2"><span class="nav-number">6.1.8.</span> <span class="nav-text">LPAD(s1, len, s2)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RPAD-s1-len-s2"><span class="nav-number">6.1.9.</span> <span class="nav-text">RPAD(s1, len, s2)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#REPLACE-s-s1-s2"><span class="nav-number">6.1.10.</span> <span class="nav-text">REPLACE(s, s1, s2)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="nav-number">6.2.</span> <span class="nav-text">数学函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ROUND-x"><span class="nav-number">6.2.1.</span> <span class="nav-text">ROUND(x)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CEIL-x"><span class="nav-number">6.2.2.</span> <span class="nav-text">CEIL(x)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FLOOR-x"><span class="nav-number">6.2.3.</span> <span class="nav-text">FLOOR(x)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TRUNCATE-x-y"><span class="nav-number">6.2.4.</span> <span class="nav-text">TRUNCATE(x, y)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MOD-x-y"><span class="nav-number">6.2.5.</span> <span class="nav-text">MOD(x, y)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="nav-number">6.3.</span> <span class="nav-text">日期函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NOW"><span class="nav-number">6.3.1.</span> <span class="nav-text">NOW()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CURDATE"><span class="nav-number">6.3.2.</span> <span class="nav-text">CURDATE()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CURTIME"><span class="nav-number">6.3.3.</span> <span class="nav-text">CURTIME()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YEAR-d"><span class="nav-number">6.3.4.</span> <span class="nav-text">YEAR(d)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MONTH-d"><span class="nav-number">6.3.5.</span> <span class="nav-text">MONTH(d)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MONTHNAME-d"><span class="nav-number">6.3.6.</span> <span class="nav-text">MONTHNAME(d)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#STR-TO-DATE-s-f"><span class="nav-number">6.3.7.</span> <span class="nav-text">STR_TO_DATE(s, f)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DATE-FORMAT-d-f"><span class="nav-number">6.3.8.</span> <span class="nav-text">DATE_FORMAT(d, f)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="nav-number">6.4.</span> <span class="nav-text">其他函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VERSION"><span class="nav-number">6.4.1.</span> <span class="nav-text">VERSION()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DATABASE"><span class="nav-number">6.4.2.</span> <span class="nav-text">DATABASE()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USER"><span class="nav-number">6.4.3.</span> <span class="nav-text">USER()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PASSWORD-%E2%80%98%E5%AD%97%E7%AC%A6%E2%80%99"><span class="nav-number">6.4.4.</span> <span class="nav-text">PASSWORD(‘字符’)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MD5-%E2%80%98%E5%AD%97%E7%AC%A6%E2%80%99"><span class="nav-number">6.4.5.</span> <span class="nav-text">MD5(‘字符’)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">6.5.</span> <span class="nav-text">流程控制函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IF-expr-v1-v2"><span class="nav-number">6.5.1.</span> <span class="nav-text">IF(expr, v1, v2)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CASE"><span class="nav-number">6.5.2.</span> <span class="nav-text">CASE</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="nav-number">7.</span> <span class="nav-text">分组函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SUM-expression"><span class="nav-number">7.1.</span> <span class="nav-text">SUM(expression)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AVG-expression"><span class="nav-number">7.2.</span> <span class="nav-text">AVG(expression)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MAX-expression"><span class="nav-number">7.3.</span> <span class="nav-text">MAX(expression)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MIN-expression"><span class="nav-number">7.4.</span> <span class="nav-text">MIN(expression)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#COUNT-expression"><span class="nav-number">7.5.</span> <span class="nav-text">COUNT(expression)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0"><span class="nav-number">7.6.</span> <span class="nav-text">支持哪些类型的参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6"><span class="nav-number">7.6.1.</span> <span class="nav-text">字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F"><span class="nav-number">7.6.2.</span> <span class="nav-text">日期</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-1"><span class="nav-number">7.7.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="nav-number">7.8.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.</span> <span class="nav-text">分组查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-1"><span class="nav-number">8.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-2"><span class="nav-number">8.2.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-number">8.3.</span> <span class="nav-text">问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="nav-number">8.4.</span> <span class="nav-text">案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E7%BB%84"><span class="nav-number">8.4.1.</span> <span class="nav-text">简单的分组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%89%8D%E7%AD%9B%E9%80%89"><span class="nav-number">8.4.2.</span> <span class="nav-text">分组前筛选</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89"><span class="nav-number">8.4.3.</span> <span class="nav-text">分组后筛选</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%8E%92%E5%BA%8F"><span class="nav-number">8.4.4.</span> <span class="nav-text">添加排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%88%86%E7%BB%84"><span class="nav-number">8.4.5.</span> <span class="nav-text">按多个字段分组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">9.</span> <span class="nav-text">连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AB%E4%B9%89"><span class="nav-number">9.1.</span> <span class="nav-text">含义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF%E7%8E%B0%E8%B1%A1"><span class="nav-number">9.2.</span> <span class="nav-text">笛卡尔乘积现象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%B1%BB"><span class="nav-number">9.3.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.4.</span> <span class="nav-text">等值连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="nav-number">9.4.1.</span> <span class="nav-text">案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E8%A1%A8%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="nav-number">9.4.2.</span> <span class="nav-text">为表起别名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6"><span class="nav-number">9.4.3.</span> <span class="nav-text">加筛选条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%88%86%E7%BB%84"><span class="nav-number">9.4.4.</span> <span class="nav-text">加分组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.5.</span> <span class="nav-text">非等值连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="nav-number">9.5.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-4"><span class="nav-number">9.5.2.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.6.</span> <span class="nav-text">自连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="nav-number">9.6.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-5"><span class="nav-number">9.6.2.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL99%E8%AF%AD%E6%B3%95-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.7.</span> <span class="nav-text">SQL99语法-内连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-4"><span class="nav-number">9.7.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-3"><span class="nav-number">9.7.2.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB-1"><span class="nav-number">9.7.3.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%A1%88%E4%BE%8B"><span class="nav-number">9.7.4.</span> <span class="nav-text">内连接-等值连接案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%A1%88%E4%BE%8B"><span class="nav-number">9.7.5.</span> <span class="nav-text">内连接-非等值连接案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-%E8%87%AA%E8%BF%9E%E6%8E%A5%E6%A1%88%E4%BE%8B"><span class="nav-number">9.7.6.</span> <span class="nav-text">内连接-自连接案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL99%E8%AF%AD%E6%B3%95-%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.8.</span> <span class="nav-text">SQL99语法-外连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-5"><span class="nav-number">9.8.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">9.8.2.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-4"><span class="nav-number">9.8.3.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.8.4.</span> <span class="nav-text">左外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.8.5.</span> <span class="nav-text">右外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.8.6.</span> <span class="nav-text">全外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="nav-number">9.8.7.</span> <span class="nav-text">交叉连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AB%E4%B9%89-1"><span class="nav-number">10.1.</span> <span class="nav-text">含义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%B1%BB-2"><span class="nav-number">10.2.</span> <span class="nav-text">分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E5%87%BA%E7%8E%B0%E4%BD%8D%E7%BD%AE"><span class="nav-number">10.2.1.</span> <span class="nav-text">按出现位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E7%BB%93%E6%9E%9C%E9%9B%86%E7%9A%84%E8%A1%8C%E5%88%97"><span class="nav-number">10.2.2.</span> <span class="nav-text">按结果集的行列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">10.3.</span> <span class="nav-text">示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#WHERE%E6%88%96HAVING%E5%90%8E%E9%9D%A2"><span class="nav-number">10.3.1.</span> <span class="nav-text">WHERE或HAVING后面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-5"><span class="nav-number">10.3.2.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.3.3.</span> <span class="nav-text">标量子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.3.4.</span> <span class="nav-text">列子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.3.5.</span> <span class="nav-text">行子查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELECT%E5%90%8E%E9%9D%A2"><span class="nav-number">10.3.6.</span> <span class="nav-text">SELECT后面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FROM%E5%90%8E%E9%9D%A2"><span class="nav-number">10.3.7.</span> <span class="nav-text">FROM后面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXISTS%E5%90%8E%E9%9D%A2-%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.3.8.</span> <span class="nav-text">EXISTS后面(相关子查询)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.</span> <span class="nav-text">分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="nav-number">11.1.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-6"><span class="nav-number">11.2.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E5%85%AC%E5%BC%8F"><span class="nav-number">11.3.</span> <span class="nav-text">分页公式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-6"><span class="nav-number">11.4.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-number">12.</span> <span class="nav-text">联合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-7"><span class="nav-number">12.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%84%8F%E4%B9%89"><span class="nav-number">12.2.</span> <span class="nav-text">意义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E7%82%B9-6"><span class="nav-number">12.3.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-7"><span class="nav-number">12.4.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DML-%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E8%A8%80"><span class="nav-number">13.</span> <span class="nav-text">DML(数据操纵语言)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#INSERT"><span class="nav-number">13.1.</span> <span class="nav-text">INSERT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="nav-number">13.1.1.</span> <span class="nav-text">方式一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="nav-number">13.1.2.</span> <span class="nav-text">方式二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%91%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">13.1.3.</span> <span class="nav-text">向表中插入数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UPDATE"><span class="nav-number">13.2.</span> <span class="nav-text">UPDATE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%8D%95%E8%A1%A8%E7%9A%84%E8%AE%B0%E5%BD%95"><span class="nav-number">13.2.1.</span> <span class="nav-text">修改单表的记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%9A%E8%A1%A8%E7%9A%84%E8%AE%B0%E5%BD%95"><span class="nav-number">13.2.2.</span> <span class="nav-text">修改多表的记录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DELETE"><span class="nav-number">13.3.</span> <span class="nav-text">DELETE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8D%95%E8%A1%A8%E7%9A%84%E8%AE%B0%E5%BD%95"><span class="nav-number">13.3.1.</span> <span class="nav-text">删除单表的记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="nav-number">13.3.2.</span> <span class="nav-text">级联删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TRUNCATE"><span class="nav-number">13.4.</span> <span class="nav-text">TRUNCATE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-8"><span class="nav-number">13.4.1.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DELETE%E5%92%8CTRUNCATE%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">13.5.</span> <span class="nav-text">DELETE和TRUNCATE的区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DDL-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80"><span class="nav-number">14.</span> <span class="nav-text">DDL(数据定义语言)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%93%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-number">14.1.</span> <span class="nav-text">库的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%93"><span class="nav-number">14.1.1.</span> <span class="nav-text">创建库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%BA%93"><span class="nav-number">14.1.2.</span> <span class="nav-text">修改库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%BA%93%E5%90%8D"><span class="nav-number">14.1.3.</span> <span class="nav-text">修改库名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%BA%93%E7%9A%84%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="nav-number">14.1.4.</span> <span class="nav-text">修改库的字符集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%BA%93"><span class="nav-number">14.1.5.</span> <span class="nav-text">删除库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-number">14.2.</span> <span class="nav-text">表的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8-1"><span class="nav-number">14.2.1.</span> <span class="nav-text">创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="nav-number">14.2.2.</span> <span class="nav-text">修改表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%97"><span class="nav-number">14.2.2.1.</span> <span class="nav-text">添加列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%88%97%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%88%96%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.2.2.2.</span> <span class="nav-text">修改列的类型或约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%88%97%E5%90%8D"><span class="nav-number">14.2.2.3.</span> <span class="nav-text">修改列名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%88%97"><span class="nav-number">14.2.2.4.</span> <span class="nav-text">删除列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E5%90%8D"><span class="nav-number">14.2.2.5.</span> <span class="nav-text">表名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="nav-number">14.2.2.6.</span> <span class="nav-text">删除表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="nav-number">14.2.3.</span> <span class="nav-text">复制表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">14.2.3.1.</span> <span class="nav-text">复制表的结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84-%E6%95%B0%E6%8D%AE"><span class="nav-number">14.2.3.2.</span> <span class="nav-text">复制表的结构+数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-8"><span class="nav-number">14.2.3.3.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">14.3.</span> <span class="nav-text">MySQL数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%9E%8B"><span class="nav-number">14.3.1.</span> <span class="nav-text">数值型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B4%E5%9E%8B"><span class="nav-number">14.3.1.1.</span> <span class="nav-text">整型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="nav-number">14.3.1.2.</span> <span class="nav-text">浮点型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="nav-number">14.3.2.</span> <span class="nav-text">字符型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%9E%8B"><span class="nav-number">14.3.3.</span> <span class="nav-text">日期型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.</span> <span class="nav-text">常见的约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E5%92%8C%E5%94%AF%E4%B8%80"><span class="nav-number">14.4.1.</span> <span class="nav-text">主键和唯一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.2.</span> <span class="nav-text">创建表时添加约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%97%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.3.</span> <span class="nav-text">添加列级约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%A1%A8%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.4.</span> <span class="nav-text">添加表级约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E5%86%99%E6%B3%95"><span class="nav-number">14.4.5.</span> <span class="nav-text">通用写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.6.</span> <span class="nav-text">修改表时添加约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.4.7.</span> <span class="nav-text">修改表时删除约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%A2%9E%E9%95%BF%E5%88%97"><span class="nav-number">14.4.8.</span> <span class="nav-text">自增长列</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%A2%9E%E9%95%BF%E5%88%97"><span class="nav-number">14.4.8.1.</span> <span class="nav-text">创建表时设置自增长列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%A2%9E%E9%95%BF%E5%88%97"><span class="nav-number">14.4.8.2.</span> <span class="nav-text">修改表时设置自增长列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%87%AA%E5%A2%9E%E9%95%BF%E5%88%97"><span class="nav-number">14.4.8.3.</span> <span class="nav-text">删除自增长列</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">15.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E8%B4%A6%E6%A1%88%E4%BE%8B"><span class="nav-number">15.1.</span> <span class="nav-text">转账案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E7%89%A9%E7%9A%84%E7%89%B9%E6%80%A7-ACID"><span class="nav-number">15.2.</span> <span class="nav-text">事物的特性( ACID )</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="nav-number">15.3.</span> <span class="nav-text">事务的创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%90%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">15.3.1.</span> <span class="nav-text">隐式事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">15.3.2.</span> <span class="nav-text">显式事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E4%BA%8B%E5%8A%A1%E6%AD%A5%E9%AA%A4"><span class="nav-number">15.3.3.</span> <span class="nav-text">开启事务步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1"><span class="nav-number">15.4.</span> <span class="nav-text">并发事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">15.5.</span> <span class="nav-text">事务隔离级别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-9"><span class="nav-number">15.6.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE"><span class="nav-number">16.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="nav-number">16.1.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E7%82%B9"><span class="nav-number">16.2.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="nav-number">16.3.</span> <span class="nav-text">创建视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="nav-number">16.4.</span> <span class="nav-text">修改视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="nav-number">16.5.</span> <span class="nav-text">删除视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE"><span class="nav-number">16.6.</span> <span class="nav-text">查看视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="nav-number">16.7.</span> <span class="nav-text">视图的更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-10"><span class="nav-number">16.7.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A1%A8%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-number">16.8.</span> <span class="nav-text">视图和表的对比</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">17.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="nav-number">17.1.</span> <span class="nav-text">系统变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-number">17.2.</span> <span class="nav-text">自定义变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="nav-number">17.3.</span> <span class="nav-text">局部变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B-11"><span class="nav-number">17.4.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">18.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95"><span class="nav-number">18.1.</span> <span class="nav-text">创建语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="nav-number">18.2.</span> <span class="nav-text">调用语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%A6in%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">18.3.</span> <span class="nav-text">创建带in模式参数的 存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAout%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">18.4.</span> <span class="nav-text">创建out模式参数的存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%A6inout%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">18.5.</span> <span class="nav-text">创建带inout模式参数的存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%88%A0%E9%99%A4"><span class="nav-number">18.6.</span> <span class="nav-text">存储过程的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">18.7.</span> <span class="nav-text">查看存储过程的信息</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0"><span class="nav-number">19.</span> <span class="nav-text">存储函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">19.1.</span> <span class="nav-text">存储过程与存储函数的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95-1"><span class="nav-number">19.2.</span> <span class="nav-text">创建语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95-1"><span class="nav-number">19.3.</span> <span class="nav-text">调用语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E"><span class="nav-number">19.4.</span> <span class="nav-text">无参有返回</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%89%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E"><span class="nav-number">19.5.</span> <span class="nav-text">有参有返回</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0"><span class="nav-number">19.6.</span> <span class="nav-text">查看函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%87%BD%E6%95%B0"><span class="nav-number">19.7.</span> <span class="nav-text">删除函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="nav-number">20.</span> <span class="nav-text">流程控制结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84"><span class="nav-number">20.1.</span> <span class="nav-text">分支结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E5%87%BD%E6%95%B0"><span class="nav-number">20.1.1.</span> <span class="nav-text">if函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case%E7%BB%93%E6%9E%84"><span class="nav-number">20.1.2.</span> <span class="nav-text">case结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E7%BB%93%E6%9E%84"><span class="nav-number">20.1.3.</span> <span class="nav-text">if结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="nav-number">20.2.</span> <span class="nav-text">循环结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-number">20.2.1.</span> <span class="nav-text">while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loop"><span class="nav-number">20.2.2.</span> <span class="nav-text">loop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#repeat"><span class="nav-number">20.2.3.</span> <span class="nav-text">repeat</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="sleep" src="/images/author.jpg"><p class="site-author-name" itemprop="name">sleep</p><div class="site-description" itemprop="description">基层菜鸟，苦苦挣扎</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/tiangoubot" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tiangoubot" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:814853462@qq.com" title="E-Mail → mailto:814853462@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://github.com/" title="https:&#x2F;&#x2F;github.com&#x2F;" rel="noopener" target="_blank">Github</a></li><li class="links-of-blogroll-item"> <a href="https://www.baidu.com/" title="https:&#x2F;&#x2F;www.baidu.com" rel="noopener" target="_blank">Baidu</a></li></ul></div></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas" style=""><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("01/05/2020 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">sleep</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">119k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:48</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="0,0,0" opacity="0.5" zindex="-1" count="150" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/local-search.js"></script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdnjs.cloudflare.com/ajax/libs/valine/1.3.10/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'OBU8fPuDMBWMSzXODQwKN6Lo-gzGzoHsz',
      appKey     : '3474e2DlUJ00rFIPGnJcGkjY',
      placeholder: "留下邮箱，有回复时你将收到提醒，邮箱不会被公开。",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>